{"ast":null,"code":"var _dec, _class;\n/**\n * Player Controls. An InteractionMode that activates interactions with a given DOM element.\n * You can create custom controls by subclassing to define your own:\n * onMouseMove: callback for mouse movement\n * onKeyDown & onKeyUp: callbacks for when keys are pressed and released\n */\n\nimport { ADragInteraction, AKeyboardInteraction, SetInteractionCallbacks, AInteractionMode, ADOMPointerMoveInteraction } from \"../../interaction\";\nimport { ASerializable } from \"../../base\";\nimport { V2 } from \"../../math\";\nimport { AWheelInteraction } from \"../../interaction/AWheelInteraction\";\nexport let ASceneInteractionMode = (_dec = ASerializable(\"ASceneInteractionMode\"), _dec(_class = class ASceneInteractionMode extends AInteractionMode {\n  // onKeyDown!:CallbackType;\n  onKeyDown(event, interaction) {}\n  onKeyUp(event, interaction) {}\n  onWheelMove(event, interaction) {}\n  onMouseMove(event, interaction) {}\n  onDragStart(event, interaction) {}\n  onDragMove(event, interaction) {}\n  onDragEnd(event, interaction) {}\n  get owner() {\n    return this._owner;\n  }\n\n  // onKeyUp!:CallbackType;\n  // onMouseMove!:CallbackType;\n  // onWheelMove!:AWheelInteractionCallback;\n  // onDragStart!:ADragInteractionCallback;\n  // onDragMove!:ADragInteractionCallback;\n  // onDragEnd!:ADragInteractionCallback;\n\n  static NameInGUI() {\n    // @ts-ignore\n    return this.SerializationLabel();\n  }\n\n  /**\n   * If you use the regular constructor, it's best to call init(...) to initialize after.\n   * @param owner\n   * @param args\n   */\n  constructor(name, owner, interactionCallbacks) {\n    super(name, owner);\n    //Set and bind default interaction callbacks if they are defined for class\n    SetInteractionCallbacks(this, this, true);\n\n    //Override with any custom callbacks provided in the argument to the constructor.\n    if (interactionCallbacks) {\n      SetInteractionCallbacks(this, interactionCallbacks, false);\n    }\n    if (name === undefined) {\n      this.name = this.serializationLabel;\n    }\n    this.isGUISelectable = true;\n    if (owner) {\n      this.init(this.owner);\n    }\n  }\n  setupInteractions() {\n    if (this.onKeyDown !== undefined || this.onKeyUp !== undefined) {\n      this.addInteraction(AKeyboardInteraction.Create(this.domElement.ownerDocument, this.onKeyDown, this.onKeyUp));\n    }\n    if (this.onMouseMove !== undefined) {\n      this.addInteraction(ADOMPointerMoveInteraction.Create(this.domElement, this.onMouseMove));\n    }\n    if (this.onWheelMove !== undefined) {\n      this.addInteraction(AWheelInteraction.Create(this.domElement, this.onWheelMove));\n    }\n    if (this.onDragStart !== undefined || this.onDragMove !== undefined || this.onDragEnd !== undefined) {\n      this.addInteraction(ADragInteraction.Create(this.domElement, this.onDragStart, this.onDragMove, this.onDragEnd));\n    }\n  }\n  static GetMouseEventMovement(event) {\n    let webEvent = event.DOMEvent;\n    // @ts-ignore\n    const movementX = webEvent.movementX || webEvent.mozMovementX || webEvent.webkitMovementX || 0;\n    // @ts-ignore\n    const movementY = webEvent.movementY || webEvent.mozMovementY || webEvent.webkitMovementY || 0;\n    return V2(movementX, movementY);\n  }\n\n  /**\n   * APlayerControls are a subclass of interactions that can only be added to SceneControllers\n   * @returns {A3DSceneController<any, any>}\n   */\n  get sceneController() {\n    return this.owner;\n  }\n  get serializationLabel() {\n    // @ts-ignore\n    return this.constructor._serializationLabel;\n  }\n\n  /**\n   * This is a model that contains a camera.\n   * The camera itself just encapsulates a pose and projection matrix. The model is what the camera belongs to,\n   * and can be an actual entity in the scene.\n   * @returns {ACameraNodeModel}\n   */\n  get cameraModel() {\n    return this.owner.cameraModel;\n  }\n  get camera() {\n    return this.cameraModel.camera;\n  }\n\n  /**\n   * This is the DOM element that is the game window being controlled\n   * @type {HTMLElement}\n   */\n  // domElement!: HTMLElement;\n  get domElement() {\n    return this.owner._renderWindow.container;\n  }\n  init(owner) {\n    this._owner = owner;\n    this.setupInteractions();\n  }\n\n  /**\n   * Create an instance in a single call, instead of calling new followed by init\n   * @param owner\n   * @param args\n   * @returns {ASceneInteractionMode}\n   * @constructor\n   */\n  static Create(owner) {\n    let controls = new this();\n    controls.init(owner);\n    return controls;\n  }\n}) || _class);","map":{"version":3,"names":["ADragInteraction","AKeyboardInteraction","SetInteractionCallbacks","AInteractionMode","ADOMPointerMoveInteraction","ASerializable","V2","AWheelInteraction","ASceneInteractionMode","onKeyDown","event","interaction","onKeyUp","onWheelMove","onMouseMove","onDragStart","onDragMove","onDragEnd","owner","_owner","NameInGUI","SerializationLabel","constructor","name","interactionCallbacks","undefined","serializationLabel","isGUISelectable","init","setupInteractions","addInteraction","Create","domElement","ownerDocument","GetMouseEventMovement","webEvent","DOMEvent","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","sceneController","_serializationLabel","cameraModel","camera","_renderWindow","container","controls"],"sources":["/Users/home/Desktop/College/Fall 2022/CS_4620/cs4620-final-project/src/anigraph/scene/interactionmodes/ASceneInteractionMode.ts"],"sourcesContent":["/**\n * Player Controls. An InteractionMode that activates interactions with a given DOM element.\n * You can create custom controls by subclassing to define your own:\n * onMouseMove: callback for mouse movement\n * onKeyDown & onKeyUp: callbacks for when keys are pressed and released\n */\n\nimport {\n    ADragInteraction,\n    AKeyboardInteraction,\n    SetInteractionCallbacks,\n    AInteractionEvent,\n    AInteractionMode,\n    ADOMPointerMoveInteraction, AClickInteraction\n} from \"../../interaction\";\nimport {ACamera} from \"../../math\";\nimport {ACameraModel} from \"../camera\";\nimport {ASerializable} from \"../../base\";\nimport {Vec2, V2} from \"../../math\";\nimport {AWheelInteraction, AWheelInteractionCallback} from \"../../interaction/AWheelInteraction\";\nimport {ASceneController} from \"../ASceneController\";\nimport type {HasInteractionModeCallbacks} from \"../../interaction\";\n\n@ASerializable(\"ASceneInteractionMode\")\nexport class ASceneInteractionMode extends AInteractionMode implements HasInteractionModeCallbacks {\n\n    // onKeyDown!:CallbackType;\n    onKeyDown(event:AInteractionEvent, interaction:AKeyboardInteraction){}\n    onKeyUp(event:AInteractionEvent, interaction:AKeyboardInteraction){}\n    onWheelMove(event:AInteractionEvent, interaction:AWheelInteraction){}\n    onMouseMove(event:AInteractionEvent, interaction: ADOMPointerMoveInteraction){}\n    onDragStart(event:AInteractionEvent, interaction:ADragInteraction){}\n    onDragMove(event:AInteractionEvent, interaction:ADragInteraction){}\n    onDragEnd(event:AInteractionEvent, interaction:ADragInteraction){}\n\n    get owner():ASceneController{\n        return this._owner as ASceneController;\n    }\n\n    // onKeyUp!:CallbackType;\n    // onMouseMove!:CallbackType;\n    // onWheelMove!:AWheelInteractionCallback;\n    // onDragStart!:ADragInteractionCallback;\n    // onDragMove!:ADragInteractionCallback;\n    // onDragEnd!:ADragInteractionCallback;\n\n    static NameInGUI(){ // @ts-ignore\n        return this.SerializationLabel();}\n\n\n    /**\n     * If you use the regular constructor, it's best to call init(...) to initialize after.\n     * @param owner\n     * @param args\n     */\n    constructor(name?:string, owner?:ASceneController,\n                interactionCallbacks?:HasInteractionModeCallbacks,\n                ...args:any[]) {\n        super(name, owner);\n        //Set and bind default interaction callbacks if they are defined for class\n        SetInteractionCallbacks(this, this, true);\n\n        //Override with any custom callbacks provided in the argument to the constructor.\n        if(interactionCallbacks) {\n            SetInteractionCallbacks(this, interactionCallbacks, false);\n        }\n        if(name === undefined){\n            this.name = this.serializationLabel;\n        }\n        this.isGUISelectable = true;\n        if(owner){\n            this.init(this.owner);\n        }\n    }\n\n\n    setupInteractions(){\n        if(this.onKeyDown!==undefined || this.onKeyUp!==undefined){\n            this.addInteraction(AKeyboardInteraction.Create(\n                this.domElement.ownerDocument,\n                this.onKeyDown,\n                this.onKeyUp\n            ))\n        }\n\n        if(this.onMouseMove!==undefined) {\n            this.addInteraction(ADOMPointerMoveInteraction.Create(\n                this.domElement,\n                this.onMouseMove\n            ))\n        }\n\n        if(this.onWheelMove!==undefined) {\n            this.addInteraction(AWheelInteraction.Create(\n                this.domElement,\n                this.onWheelMove\n            ));\n        }\n        if(\n            this.onDragStart!==undefined ||\n            this.onDragMove!==undefined ||\n            this.onDragEnd!==undefined\n        ) {\n            this.addInteraction(ADragInteraction.Create(\n                this.domElement,\n                this.onDragStart,\n                this.onDragMove,\n                this.onDragEnd\n            ));\n        }\n    }\n\n    static GetMouseEventMovement(event:AInteractionEvent){\n        let webEvent = (event.DOMEvent as MouseEvent);\n        // @ts-ignore\n        const movementX = webEvent.movementX || webEvent.mozMovementX || webEvent.webkitMovementX || 0;\n        // @ts-ignore\n        const movementY = webEvent.movementY || webEvent.mozMovementY || webEvent.webkitMovementY || 0;\n        return V2(movementX, movementY);\n    }\n\n\n\n    /**\n     * APlayerControls are a subclass of interactions that can only be added to SceneControllers\n     * @returns {A3DSceneController<any, any>}\n     */\n    get sceneController(): ASceneController{\n        return this.owner;\n    }\n\n    get serializationLabel() {\n        // @ts-ignore\n        return this.constructor._serializationLabel\n    }\n\n    /**\n     * This is a model that contains a camera.\n     * The camera itself just encapsulates a pose and projection matrix. The model is what the camera belongs to,\n     * and can be an actual entity in the scene.\n     * @returns {ACameraNodeModel}\n     */\n    get cameraModel(): ACameraModel {\n        return this.owner.cameraModel;\n    }\n\n    get camera(): ACamera {\n        return this.cameraModel.camera;\n    }\n\n    /**\n     * This is the DOM element that is the game window being controlled\n     * @type {HTMLElement}\n     */\n    // domElement!: HTMLElement;\n    get domElement():HTMLElement{\n        return this.owner._renderWindow.container;\n    }\n\n\n\n    init(owner: ASceneController, ...args: any[]) {\n        this._owner = owner;\n        this.setupInteractions();\n    }\n\n\n\n    /**\n     * Create an instance in a single call, instead of calling new followed by init\n     * @param owner\n     * @param args\n     * @returns {ASceneInteractionMode}\n     * @constructor\n     */\n    static Create(owner: ASceneController, ...args: any[]) {\n        let controls = new this();\n        controls.init(owner);\n        return controls;\n    }\n\n}\n\n\n\n\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,SACIA,gBAAgB,EAChBC,oBAAoB,EACpBC,uBAAuB,EAEvBC,gBAAgB,EAChBC,0BAA0B,QACvB,mBAAmB;AAG1B,SAAQC,aAAa,QAAO,YAAY;AACxC,SAAcC,EAAE,QAAO,YAAY;AACnC,SAAQC,iBAAiB,QAAkC,qCAAqC;AAIhG,WACaC,qBAAqB,WADjCH,aAAa,CAAC,uBAAuB,CAAC,gBAAvC,MACaG,qBAAqB,SAASL,gBAAgB,CAAwC;EAE/F;EACAM,SAAS,CAACC,KAAuB,EAAEC,WAAgC,EAAC,CAAC;EACrEC,OAAO,CAACF,KAAuB,EAAEC,WAAgC,EAAC,CAAC;EACnEE,WAAW,CAACH,KAAuB,EAAEC,WAA6B,EAAC,CAAC;EACpEG,WAAW,CAACJ,KAAuB,EAAEC,WAAuC,EAAC,CAAC;EAC9EI,WAAW,CAACL,KAAuB,EAAEC,WAA4B,EAAC,CAAC;EACnEK,UAAU,CAACN,KAAuB,EAAEC,WAA4B,EAAC,CAAC;EAClEM,SAAS,CAACP,KAAuB,EAAEC,WAA4B,EAAC,CAAC;EAEjE,IAAIO,KAAK,GAAmB;IACxB,OAAO,IAAI,CAACC,MAAM;EACtB;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA,OAAOC,SAAS,GAAE;IAAE;IAChB,OAAO,IAAI,CAACC,kBAAkB,EAAE;EAAC;;EAGrC;AACJ;AACA;AACA;AACA;EACIC,WAAW,CAACC,IAAY,EAAEL,KAAuB,EACrCM,oBAAiD,EAClC;IACvB,KAAK,CAACD,IAAI,EAAEL,KAAK,CAAC;IAClB;IACAhB,uBAAuB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;;IAEzC;IACA,IAAGsB,oBAAoB,EAAE;MACrBtB,uBAAuB,CAAC,IAAI,EAAEsB,oBAAoB,EAAE,KAAK,CAAC;IAC9D;IACA,IAAGD,IAAI,KAAKE,SAAS,EAAC;MAClB,IAAI,CAACF,IAAI,GAAG,IAAI,CAACG,kBAAkB;IACvC;IACA,IAAI,CAACC,eAAe,GAAG,IAAI;IAC3B,IAAGT,KAAK,EAAC;MACL,IAAI,CAACU,IAAI,CAAC,IAAI,CAACV,KAAK,CAAC;IACzB;EACJ;EAGAW,iBAAiB,GAAE;IACf,IAAG,IAAI,CAACpB,SAAS,KAAGgB,SAAS,IAAI,IAAI,CAACb,OAAO,KAAGa,SAAS,EAAC;MACtD,IAAI,CAACK,cAAc,CAAC7B,oBAAoB,CAAC8B,MAAM,CAC3C,IAAI,CAACC,UAAU,CAACC,aAAa,EAC7B,IAAI,CAACxB,SAAS,EACd,IAAI,CAACG,OAAO,CACf,CAAC;IACN;IAEA,IAAG,IAAI,CAACE,WAAW,KAAGW,SAAS,EAAE;MAC7B,IAAI,CAACK,cAAc,CAAC1B,0BAA0B,CAAC2B,MAAM,CACjD,IAAI,CAACC,UAAU,EACf,IAAI,CAAClB,WAAW,CACnB,CAAC;IACN;IAEA,IAAG,IAAI,CAACD,WAAW,KAAGY,SAAS,EAAE;MAC7B,IAAI,CAACK,cAAc,CAACvB,iBAAiB,CAACwB,MAAM,CACxC,IAAI,CAACC,UAAU,EACf,IAAI,CAACnB,WAAW,CACnB,CAAC;IACN;IACA,IACI,IAAI,CAACE,WAAW,KAAGU,SAAS,IAC5B,IAAI,CAACT,UAAU,KAAGS,SAAS,IAC3B,IAAI,CAACR,SAAS,KAAGQ,SAAS,EAC5B;MACE,IAAI,CAACK,cAAc,CAAC9B,gBAAgB,CAAC+B,MAAM,CACvC,IAAI,CAACC,UAAU,EACf,IAAI,CAACjB,WAAW,EAChB,IAAI,CAACC,UAAU,EACf,IAAI,CAACC,SAAS,CACjB,CAAC;IACN;EACJ;EAEA,OAAOiB,qBAAqB,CAACxB,KAAuB,EAAC;IACjD,IAAIyB,QAAQ,GAAIzB,KAAK,CAAC0B,QAAuB;IAC7C;IACA,MAAMC,SAAS,GAAGF,QAAQ,CAACE,SAAS,IAAIF,QAAQ,CAACG,YAAY,IAAIH,QAAQ,CAACI,eAAe,IAAI,CAAC;IAC9F;IACA,MAAMC,SAAS,GAAGL,QAAQ,CAACK,SAAS,IAAIL,QAAQ,CAACM,YAAY,IAAIN,QAAQ,CAACO,eAAe,IAAI,CAAC;IAC9F,OAAOpC,EAAE,CAAC+B,SAAS,EAAEG,SAAS,CAAC;EACnC;;EAIA;AACJ;AACA;AACA;EACI,IAAIG,eAAe,GAAoB;IACnC,OAAO,IAAI,CAACzB,KAAK;EACrB;EAEA,IAAIQ,kBAAkB,GAAG;IACrB;IACA,OAAO,IAAI,CAACJ,WAAW,CAACsB,mBAAmB;EAC/C;;EAEA;AACJ;AACA;AACA;AACA;AACA;EACI,IAAIC,WAAW,GAAiB;IAC5B,OAAO,IAAI,CAAC3B,KAAK,CAAC2B,WAAW;EACjC;EAEA,IAAIC,MAAM,GAAY;IAClB,OAAO,IAAI,CAACD,WAAW,CAACC,MAAM;EAClC;;EAEA;AACJ;AACA;AACA;EACI;EACA,IAAId,UAAU,GAAc;IACxB,OAAO,IAAI,CAACd,KAAK,CAAC6B,aAAa,CAACC,SAAS;EAC7C;EAIApB,IAAI,CAACV,KAAuB,EAAkB;IAC1C,IAAI,CAACC,MAAM,GAAGD,KAAK;IACnB,IAAI,CAACW,iBAAiB,EAAE;EAC5B;;EAIA;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,OAAOE,MAAM,CAACb,KAAuB,EAAkB;IACnD,IAAI+B,QAAQ,GAAG,IAAI,IAAI,EAAE;IACzBA,QAAQ,CAACrB,IAAI,CAACV,KAAK,CAAC;IACpB,OAAO+B,QAAQ;EACnB;AAEJ,CAAC"},"metadata":{},"sourceType":"module"}