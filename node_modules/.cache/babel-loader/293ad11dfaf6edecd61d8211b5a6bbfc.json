{"ast":null,"code":"var _dec, _class;\nimport { ASerializable } from \"../../../../anigraph\";\nimport { TriangleMeshCharacterModel } from \"../CharacterNodes/TriangleMeshCharacterModel\";\nimport { ATexture } from \"../../../../anigraph/rendering/ATexture\";\nimport { AppConfigs } from \"../../../AppConfigs\";\nimport { CharacterModel } from \"../../../BaseClasses\";\nexport let PlayerModel = (_dec = ASerializable(\"PlayerModel\"), _dec(_class = class PlayerModel extends TriangleMeshCharacterModel {\n  constructor() {\n    super(...arguments);\n    this.size = void 0;\n    this.requestJump = false;\n    this.horizontalMoving = false;\n  }\n  static async Create(diffuseMap, size) {\n    var _size;\n    size = (_size = size) !== null && _size !== void 0 ? _size : AppConfigs.DefaultBotSize;\n    let newmodel = new this();\n    newmodel.size = size;\n    await newmodel.init(diffuseMap);\n    return newmodel;\n  }\n  async init(diffuseMap) {\n    this.setMaterial(CharacterModel.ShaderModel.CreateMaterial(diffuseMap instanceof ATexture ? diffuseMap : new ATexture(diffuseMap)));\n  }\n  update(listOfTerrains) {\n    if (this.requestJump) {\n      if (AppConfigs.AllowMultiJump || Math.abs(this.velocity.y) < 0.001) {\n        this.velocity.y = AppConfigs.JumpPower;\n      }\n      this.requestJump = false;\n    }\n    this.velocity.y -= AppConfigs.Gravity;\n    if (!this.horizontalMoving) {\n      this.velocity.x /= 1 + AppConfigs.SlowDown;\n    }\n    for (let terrain of listOfTerrains) {\n      const upperBound = terrain.position.y + terrain.sizeY / 2;\n      const lowerBound = terrain.position.y - terrain.sizeY / 2;\n      const leftBound = terrain.position.x - terrain.sizeX / 2;\n      const rightBound = terrain.position.x + terrain.sizeX / 2;\n      const thisUpperBound = this.position.y + this.size / 2;\n      const thisLowerBound = this.position.y - this.size / 2;\n      const thisLeftBound = this.position.x - this.size / 2;\n      const thisRightBound = this.position.x + this.size / 2;\n      if (thisLowerBound < upperBound && thisLowerBound > lowerBound || thisUpperBound > lowerBound && thisUpperBound < upperBound) {\n        if (this.velocity.x > 0 && thisRightBound + this.velocity.x > leftBound && thisLeftBound < rightBound) {\n          this.velocity.x = Math.min(this.velocity.x, leftBound - thisRightBound);\n        }\n        if (this.velocity.x < 0 && thisLeftBound + this.velocity.x < rightBound && thisRightBound > rightBound) {\n          this.velocity.x = Math.max(this.velocity.x, -(thisLeftBound - rightBound));\n        }\n      }\n      if (thisLeftBound < rightBound && thisLeftBound > leftBound || thisRightBound > leftBound && thisRightBound < rightBound) {\n        if (this.velocity.y < 0 && thisLowerBound + this.velocity.y < upperBound && thisUpperBound > upperBound) {\n          this.velocity.y = Math.max(this.velocity.y, -(thisLowerBound - upperBound));\n        }\n        if (this.velocity.y > 0 && thisUpperBound + this.velocity.y > lowerBound && thisLowerBound < lowerBound) {\n          this.velocity.y = Math.min(this.velocity.y, lowerBound - thisUpperBound);\n        }\n      }\n    }\n    this.position = this.position.plus(this.velocity);\n  }\n}) || _class);","map":{"version":3,"names":["ASerializable","TriangleMeshCharacterModel","ATexture","AppConfigs","CharacterModel","PlayerModel","size","requestJump","horizontalMoving","Create","diffuseMap","DefaultBotSize","newmodel","init","setMaterial","ShaderModel","CreateMaterial","update","listOfTerrains","AllowMultiJump","Math","abs","velocity","y","JumpPower","Gravity","x","SlowDown","terrain","upperBound","position","sizeY","lowerBound","leftBound","sizeX","rightBound","thisUpperBound","thisLowerBound","thisLeftBound","thisRightBound","min","max","plus"],"sources":["/Users/home/Desktop/cs4620-final-project/src/app/main/Nodes/PlayerNode/PlayerModel.ts"],"sourcesContent":["import {ASerializable} from \"../../../../anigraph\";\nimport {TriangleMeshCharacterModel} from \"../CharacterNodes/TriangleMeshCharacterModel\";\nimport {ATexture} from \"../../../../anigraph/rendering/ATexture\";\nimport {AppConfigs} from \"../../../AppConfigs\";\nimport {CharacterModel} from \"../../../BaseClasses\";\nimport {GameTerrainModel} from \"../GameTerrain/GameTerrainModel\";\n\n@ASerializable(\"PlayerModel\")\nexport class PlayerModel extends TriangleMeshCharacterModel{\n    size!:number;\n    requestJump: boolean = false;\n    horizontalMoving: boolean = false;\n    static async Create(diffuseMap:string|ATexture, size?:number, ...args:any[]){\n        size = size??AppConfigs.DefaultBotSize;\n        let newmodel = new this();\n        newmodel.size = size;\n        await newmodel.init(diffuseMap);\n        return newmodel;\n    }\n\n    async init(diffuseMap:string|ATexture, ...args:any[]){\n        this.setMaterial(CharacterModel.ShaderModel.CreateMaterial(\n            (diffuseMap instanceof ATexture)? diffuseMap:new ATexture(diffuseMap)\n        ));\n    }\n\n    update(listOfTerrains: GameTerrainModel[]){\n        if (this.requestJump) {\n            if (AppConfigs.AllowMultiJump || Math.abs(this.velocity.y) < 0.001) {\n                this.velocity.y = AppConfigs.JumpPower;\n            }\n            this.requestJump = false;\n        }\n        this.velocity.y -= AppConfigs.Gravity;\n        if (!this.horizontalMoving) {\n            this.velocity.x /= 1 + AppConfigs.SlowDown;\n        }\n        for (let terrain of listOfTerrains) {\n            const upperBound = terrain.position.y + terrain.sizeY / 2;\n            const lowerBound = terrain.position.y - terrain.sizeY / 2;\n            const leftBound = terrain.position.x - terrain.sizeX / 2;\n            const rightBound = terrain.position.x + terrain.sizeX / 2;\n\n            const thisUpperBound = this.position.y + this.size / 2;\n            const thisLowerBound = this.position.y - this.size / 2;\n            const thisLeftBound = this.position.x - this.size / 2;\n            const thisRightBound = this.position.x + this.size / 2;\n\n            if ((thisLowerBound < upperBound && thisLowerBound > lowerBound) ||\n              (thisUpperBound > lowerBound && thisUpperBound < upperBound)) {\n                if (this.velocity.x > 0 && thisRightBound + this.velocity.x > leftBound && thisLeftBound < rightBound) {\n                    this.velocity.x = Math.min(this.velocity.x, leftBound - thisRightBound);\n                }\n\n                if (this.velocity.x < 0 && thisLeftBound + this.velocity.x < rightBound && thisRightBound > rightBound) {\n                    this.velocity.x = Math.max(this.velocity.x, -(thisLeftBound - rightBound));\n                }\n            }\n\n            if ((thisLeftBound < rightBound && thisLeftBound > leftBound) ||\n              (thisRightBound > leftBound && thisRightBound < rightBound)) {\n                if (this.velocity.y < 0 && thisLowerBound + this.velocity.y < upperBound && thisUpperBound > upperBound) {\n                    this.velocity.y = Math.max(this.velocity.y, -(thisLowerBound - upperBound));\n                }\n\n                if (this.velocity.y > 0 && thisUpperBound + this.velocity.y > lowerBound && thisLowerBound < lowerBound) {\n                    this.velocity.y = Math.min(this.velocity.y, lowerBound - thisUpperBound);\n                }\n            }\n\n        }\n\n        this.position = this.position.plus(this.velocity);\n    }\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}