{"ast":null,"code":"import { NodeTransform3D } from \"../../../../anigraph\";\nimport { AInstancedParticleSystemGraphic } from \"../../../../anigraph/effects/particles/InstancedParticles\";\nimport { InstancedParticleSystemView } from \"../../../BaseClasses/InstancedParticlesStarter/InstancedParticleSystemView\";\nexport class BillboardParticleSystemView extends InstancedParticleSystemView {\n  get particlesElement() {\n    return this._particlesElement;\n  }\n  get model() {\n    return this._model;\n  }\n  createParticlesElement() {\n    return AInstancedParticleSystemGraphic.Create(BillboardParticleSystemView.MAX_PARTICLES);\n  }\n  init() {\n    super.init();\n  }\n  update() {\n    super.update(...arguments);\n  }\n\n  /**\n   * This function should return the color to be applied to the particle associated with the provided particle index\n   * @param particle\n   */\n  getColorForParticleIndex(i) {\n    // throw new Error(\"Method not implemented.\");\n    return this.model.particles[i].color;\n  }\n\n  /**\n   * This function should return the transformation to be applied to geometry associated with the provided particle\n   * @param particle\n   */\n  getTransformForParticleIndex(i) {\n    // throw new Error(\"Method not implemented.\");\n    let cameraTransform = this.model.cameraTransform;\n    let particle = this.model.particles[i];\n    let nt = new NodeTransform3D(particle.position, cameraTransform.rotation, particle.size);\n    return nt.getMat4();\n  }\n}\nBillboardParticleSystemView.MAX_PARTICLES = 50;","map":{"version":3,"names":["NodeTransform3D","AInstancedParticleSystemGraphic","InstancedParticleSystemView","BillboardParticleSystemView","particlesElement","_particlesElement","model","_model","createParticlesElement","Create","MAX_PARTICLES","init","update","getColorForParticleIndex","i","particles","color","getTransformForParticleIndex","cameraTransform","particle","nt","position","rotation","size","getMat4"],"sources":["/Users/home/Desktop/cs4620-final-project/src/app/main/Nodes/BillboardParticleSystem/BillboardParticleSystemView.ts"],"sourcesContent":["import {BillboardParticleSystemModel} from \"./BillboardParticleSystemModel\";\nimport {Color, Mat4, NodeTransform3D, Quaternion} from \"../../../../anigraph\";\nimport {AInstancedParticleSystemGraphic,} from \"../../../../anigraph/effects/particles/InstancedParticles\";\nimport {BillboardParticleSystemGraphic} from \"./BillboardParticleSystemGraphic\";\nimport {InstancedParticleSystemView} from \"../../../BaseClasses/InstancedParticlesStarter/InstancedParticleSystemView\";\nimport {BillboardParticle} from \"./BillboardParticle\";\n\nexport class BillboardParticleSystemView extends InstancedParticleSystemView<BillboardParticle>{\n    static MAX_PARTICLES = 50;\n\n    get particlesElement():BillboardParticleSystemGraphic{\n        return this._particlesElement as BillboardParticleSystemGraphic;\n    }\n    get model():BillboardParticleSystemModel{\n        return this._model as BillboardParticleSystemModel;\n    }\n\n    createParticlesElement(...args:any[]): BillboardParticleSystemGraphic {\n        return AInstancedParticleSystemGraphic.Create(BillboardParticleSystemView.MAX_PARTICLES);\n    }\n\n    init() {\n        super.init();\n    }\n\n    update(...args:any[]) {\n        super.update(...args);\n    }\n\n    /**\n     * This function should return the color to be applied to the particle associated with the provided particle index\n     * @param particle\n     */\n    getColorForParticleIndex(i: number): Color {\n        // throw new Error(\"Method not implemented.\");\n        return this.model.particles[i].color;\n    }\n\n    /**\n     * This function should return the transformation to be applied to geometry associated with the provided particle\n     * @param particle\n     */\n    getTransformForParticleIndex(i: number): Mat4 {\n        // throw new Error(\"Method not implemented.\");\n        let cameraTransform = this.model.cameraTransform;\n        let particle = this.model.particles[i];\n        let nt=new NodeTransform3D(particle.position,cameraTransform.rotation, particle.size);\n        return nt.getMat4();\n    }\n}\n"],"mappings":"AACA,SAAqBA,eAAe,QAAmB,sBAAsB;AAC7E,SAAQC,+BAA+B,QAAQ,2DAA2D;AAE1G,SAAQC,2BAA2B,QAAO,4EAA4E;AAGtH,OAAO,MAAMC,2BAA2B,SAASD,2BAA2B,CAAmB;EAG3F,IAAIE,gBAAgB,GAAiC;IACjD,OAAO,IAAI,CAACC,iBAAiB;EACjC;EACA,IAAIC,KAAK,GAA+B;IACpC,OAAO,IAAI,CAACC,MAAM;EACtB;EAEAC,sBAAsB,GAAgD;IAClE,OAAOP,+BAA+B,CAACQ,MAAM,CAACN,2BAA2B,CAACO,aAAa,CAAC;EAC5F;EAEAC,IAAI,GAAG;IACH,KAAK,CAACA,IAAI,EAAE;EAChB;EAEAC,MAAM,GAAgB;IAClB,KAAK,CAACA,MAAM,CAAC,YAAO,CAAC;EACzB;;EAEA;AACJ;AACA;AACA;EACIC,wBAAwB,CAACC,CAAS,EAAS;IACvC;IACA,OAAO,IAAI,CAACR,KAAK,CAACS,SAAS,CAACD,CAAC,CAAC,CAACE,KAAK;EACxC;;EAEA;AACJ;AACA;AACA;EACIC,4BAA4B,CAACH,CAAS,EAAQ;IAC1C;IACA,IAAII,eAAe,GAAG,IAAI,CAACZ,KAAK,CAACY,eAAe;IAChD,IAAIC,QAAQ,GAAG,IAAI,CAACb,KAAK,CAACS,SAAS,CAACD,CAAC,CAAC;IACtC,IAAIM,EAAE,GAAC,IAAIpB,eAAe,CAACmB,QAAQ,CAACE,QAAQ,EAACH,eAAe,CAACI,QAAQ,EAAEH,QAAQ,CAACI,IAAI,CAAC;IACrF,OAAOH,EAAE,CAACI,OAAO,EAAE;EACvB;AACJ;AA1CarB,2BAA2B,CAC7BO,aAAa,GAAG,EAAE"},"metadata":{},"sourceType":"module"}