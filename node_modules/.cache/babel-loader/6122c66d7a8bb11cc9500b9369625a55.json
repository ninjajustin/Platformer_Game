{"ast":null,"code":"import { AEventCallbackDict } from \"../aevents\";\nimport { v4 as uuidv4 } from \"uuid\";\nexport class AHandlesEvents {\n  constructor() {\n    this._eventCallbackDicts = {};\n    this._subscriptions = {};\n  }\n  _getEventCallbackDict(eventName) {\n    return this._eventCallbackDicts[eventName];\n  }\n  addEventListener(eventName, callback, handle) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n    }\n    return this._eventCallbackDicts[eventName].addCallback(callback, handle);\n  }\n  addEventListeners(eventName, callbacks, handle) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n    }\n    return this._eventCallbackDicts[eventName].addCallback(callbacks, handle);\n  }\n  addOneTimeEventListener(eventName, callback, handle) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n    }\n    const self = this;\n    handle = handle ? handle : uuidv4();\n    function wrapped() {\n      callback(...arguments);\n      self.removeEventListener(eventName, handle);\n    }\n    return this._eventCallbackDicts[eventName].addCallback(wrapped, handle);\n  }\n  removeEventListener(eventName, handle) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      return;\n    }\n    return this._eventCallbackDicts[eventName].removeCallback(handle);\n  }\n  signalEvent(eventName) {\n    if (this._eventCallbackDicts[eventName] === undefined) {\n      this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n    }\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    this._getEventCallbackDict(eventName).signalEvent(...args);\n  }\n  //</editor-fold>\n  //##################\\\\--ASignalsEvents--//##################\n\n  //##################//--ASubscribesToEvents--\\\\##################\n  //<editor-fold desc=\"ASubscribesToEvents\">\n\n  subscribe(callbackSwitch, name) {\n    name = name ? name : uuidv4();\n    if (name in this._subscriptions) {\n      if (this._subscriptions[name].active) {\n        this._subscriptions[name].deactivate();\n        console.warn(`Re-Subscribing to \"${name}\", which already has a subscription!`);\n      }\n    }\n    this._subscriptions[name] = callbackSwitch;\n  }\n  unsubscribe(name) {\n    let errorIfAbsent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (name in this._subscriptions) {\n      if (this._subscriptions[name].active) {\n        this._subscriptions[name].deactivate();\n      }\n      delete this._subscriptions[name];\n    } else if (errorIfAbsent) {\n      // select both, drag on one, and release with shift then click again\n      throw new Error(`tried to remove subscription \"${name}\", but no such subscription found in ${this}`);\n    }\n  }\n  clearSubscriptions() {\n    for (let name in this._subscriptions) {\n      this.unsubscribe(name);\n    }\n  }\n  deactivateSubscription(name) {\n    if (name in this._subscriptions) {\n      if (this._subscriptions[name].active) {\n        this._subscriptions[name].deactivate();\n      }\n    } else {\n      throw new Error(`tried to deactivate subscription \"${name}\", but no such subscription found in ${this}`);\n    }\n  }\n  activateSubscription(name) {\n    if (name in this._subscriptions) {\n      if (!this._subscriptions[name].active) {\n        this._subscriptions[name].activate();\n      }\n    } else {\n      throw new Error(`tried to activate subscription \"${name}\", but no such subscription found in ${this}`);\n    }\n  }\n  //</editor-fold>\n  //##################\\\\--ASubscribesToEvents--//##################\n}","map":{"version":3,"names":["AEventCallbackDict","v4","uuidv4","AHandlesEvents","_eventCallbackDicts","_subscriptions","_getEventCallbackDict","eventName","addEventListener","callback","handle","undefined","addCallback","addEventListeners","callbacks","addOneTimeEventListener","self","wrapped","removeEventListener","removeCallback","signalEvent","args","subscribe","callbackSwitch","name","active","deactivate","console","warn","unsubscribe","errorIfAbsent","Error","clearSubscriptions","deactivateSubscription","activateSubscription","activate"],"sources":["/Users/home/Desktop/College/Fall 2022/CS_4620/cs4620-final-project/src/anigraph/base/aobject/AHandlesEvents.ts"],"sourcesContent":["import {ACallbackSwitch, AEventCallbackDict} from \"../aevents\";\nimport {v4 as uuidv4} from \"uuid\";\n\nexport class AHandlesEvents{\n    protected _eventCallbackDicts: { [name: string]: AEventCallbackDict } = {};\n\n    _getEventCallbackDict(eventName: string) {\n        return this._eventCallbackDicts[eventName];\n    }\n\n    addEventListener(\n        eventName: string,\n        callback: (...args: any[]) => void,\n        handle?: string\n    ) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n        }\n        return this._eventCallbackDicts[eventName].addCallback(callback, handle);\n    }\n\n    addEventListeners(\n        eventName: string,\n        callbacks: ((...args: any[]) => void)[],\n        handle?: string\n    ) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n        }\n        return this._eventCallbackDicts[eventName].addCallback(callbacks, handle);\n    }\n\n    addOneTimeEventListener(\n        eventName: string,\n        callback: (...args: any[]) => void,\n        handle?: string\n    ) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n        }\n        const self = this;\n        handle = handle ? handle : (uuidv4() as string);\n        function wrapped(...args: []) {\n            callback(...args);\n            self.removeEventListener(eventName, handle as string);\n        }\n        return this._eventCallbackDicts[eventName].addCallback(wrapped, handle);\n    }\n\n    removeEventListener(eventName: string, handle: string) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            return;\n        }\n        return this._eventCallbackDicts[eventName].removeCallback(handle);\n    }\n\n    signalEvent(eventName: string, ...args: any[]) {\n        if (this._eventCallbackDicts[eventName] === undefined) {\n            this._eventCallbackDicts[eventName] = new AEventCallbackDict(eventName);\n        }\n        this._getEventCallbackDict(eventName).signalEvent(...args);\n    }\n    //</editor-fold>\n    //##################\\\\--ASignalsEvents--//##################\n\n    //##################//--ASubscribesToEvents--\\\\##################\n    //<editor-fold desc=\"ASubscribesToEvents\">\n    protected _subscriptions: { [name: string]: ACallbackSwitch } = {};\n    public subscribe(callbackSwitch: ACallbackSwitch, name?: string) {\n        name = name ? name : uuidv4();\n        if (name in this._subscriptions) {\n            if (this._subscriptions[name].active) {\n                this._subscriptions[name].deactivate();\n                console.warn(\n                    `Re-Subscribing to \"${name}\", which already has a subscription!`\n                );\n            }\n        }\n        this._subscriptions[name] = callbackSwitch;\n    }\n\n    public unsubscribe(name: string, errorIfAbsent: boolean = true) {\n        if (name in this._subscriptions) {\n            if (this._subscriptions[name].active) {\n                this._subscriptions[name].deactivate();\n            }\n            delete this._subscriptions[name];\n        } else if (errorIfAbsent) {\n            // select both, drag on one, and release with shift then click again\n            throw new Error(\n                `tried to remove subscription \"${name}\", but no such subscription found in ${this}`\n            );\n        }\n    }\n\n    clearSubscriptions() {\n        for (let name in this._subscriptions) {\n            this.unsubscribe(name);\n        }\n    }\n\n    deactivateSubscription(name: string) {\n        if (name in this._subscriptions) {\n            if (this._subscriptions[name].active) {\n                this._subscriptions[name].deactivate();\n            }\n        } else {\n            throw new Error(\n                `tried to deactivate subscription \"${name}\", but no such subscription found in ${this}`\n            );\n        }\n    }\n\n    activateSubscription(name: string) {\n        if (name in this._subscriptions) {\n            if (!this._subscriptions[name].active) {\n                this._subscriptions[name].activate();\n            }\n        } else {\n            throw new Error(\n                `tried to activate subscription \"${name}\", but no such subscription found in ${this}`\n            );\n        }\n    }\n    //</editor-fold>\n    //##################\\\\--ASubscribesToEvents--//##################\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}