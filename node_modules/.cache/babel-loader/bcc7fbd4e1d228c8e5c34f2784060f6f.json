{"ast":null,"code":"var _jsxFileName = \"/Users/home/Desktop/College/Fall 2022/CS_4620/cs4620-final-project/src/app/main/MainComponent.tsx\",\n  _s = $RefreshSig$();\n/**\n * @file Manages the configuration settings for the widget.\n * @author Abe Davis\n * @description Main react component for the app. If you want to add additional react widgets you are welcome, but this\n * generally shouldn't be necessary.\n */\n\nimport { GetAppState } from \"./MainAppState\";\nimport { AThreeJSContextComponent, ControlPanel } from \"../../anigraph\";\nimport React, { useEffect, useState } from \"react\";\nimport { MainSceneController, MainSceneModel } from \"./Scene\";\nimport Editor from \"./Editor/Editor\";\nimport { readLevels, saveLevels } from \"../Backend/LevelLoader\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SceneModel = new MainSceneModel();\nSceneModel.confirmInitialized();\nconst SceneController = new MainSceneController(SceneModel);\n\n/**\n * Comment out the code above and uncomment the code below to run the Example1Scene\n * Which has a loaded 3D model and the billboard particle system skeleton code\n */\n// import {Example1SceneModel} from \"./Scene/ExampleScenes/Example1\";\n// import {Example1SceneController} from \"./Scene/ExampleScenes/Example1\";\n// const SceneModel = new Example1SceneModel();\n// SceneModel.confirmInitialized();\n// const SceneController = new Example1SceneController(SceneModel);\n\n// import {Example2SceneModel} from \"./Scene/ExampleScenes/Example2\";\n// import {Example2SceneController} from \"./Scene/ExampleScenes/Example2\";\n// const SceneModel = new Example2SceneModel();\n// SceneModel.confirmInitialized();\n// const SceneController = new Example2SceneController(SceneModel);\n\n// import {Example3SceneModel} from \"./Scene/ExampleScenes/Example3\";\n// import {Example3SceneController} from \"./Scene/ExampleScenes/Example3\";\n// const SceneModel = new Example3SceneModel();\n// SceneModel.confirmInitialized();\n// const SceneController = new Example3SceneController(SceneModel);\n\nlet appState = GetAppState();\nexport function MainComponent() {\n  _s();\n  const [levels, setLevels] = useState(readLevels());\n  const [editorMode, setEditorMode] = useState(false);\n  SceneController.enterEditorMode = () => {\n    setEditorMode(true);\n  };\n  useEffect(() => {\n    SceneController.updateLevels(levels);\n  }, []);\n  useEffect(() => {\n    const resizeHandle = () => {\n      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n      const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\n      const agc = document.body.querySelector(\".anigraphcontainer\");\n      const scale = Math.min(vw / 2000, vh / 2000);\n      const tx = (vw - scale * 2000) / 2;\n      const ty = (vh - scale * 2000) / 2;\n      agc.style.transform = `translateX(${tx}px) translateY(${ty}px) scale(${scale})`;\n    };\n    resizeHandle();\n    window.addEventListener(\"resize\", resizeHandle);\n    return () => {\n      window.removeEventListener(\"resize\", resizeHandle);\n    };\n  }, []);\n  useEffect(() => {\n    SceneController.paused = editorMode;\n  }, [editorMode]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!editorMode && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ControlPanel, {\n        appState: appState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AThreeJSContextComponent, {\n        controller: SceneController\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true), editorMode && /*#__PURE__*/_jsxDEV(Editor, {\n      levels: levels,\n      updateLevels: levels => {\n        setLevels(levels);\n        // debugger;\n        saveLevels(levels);\n      },\n      exit: () => {\n        window.location.reload();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(MainComponent, \"0Ermcmd62mRUa8svDZwSnq+EQKA=\");\n_c = MainComponent;\nvar _c;\n$RefreshReg$(_c, \"MainComponent\");","map":{"version":3,"names":["GetAppState","AThreeJSContextComponent","ControlPanel","React","useEffect","useState","MainSceneController","MainSceneModel","Editor","readLevels","saveLevels","SceneModel","confirmInitialized","SceneController","appState","MainComponent","levels","setLevels","editorMode","setEditorMode","enterEditorMode","updateLevels","resizeHandle","vw","Math","max","document","documentElement","clientWidth","window","innerWidth","vh","clientHeight","innerHeight","agc","body","querySelector","scale","min","tx","ty","style","transform","addEventListener","removeEventListener","paused","location","reload"],"sources":["/Users/home/Desktop/College/Fall 2022/CS_4620/cs4620-final-project/src/app/main/MainComponent.tsx"],"sourcesContent":["/**\n * @file Manages the configuration settings for the widget.\n * @author Abe Davis\n * @description Main react component for the app. If you want to add additional react widgets you are welcome, but this\n * generally shouldn't be necessary.\n */\n\nimport {GetAppState} from \"./MainAppState\";\nimport {AThreeJSContextComponent, ControlPanel} from \"../../anigraph\";\nimport React, {useEffect, useState} from \"react\";\n\nimport {MainSceneController, MainSceneModel} from \"./Scene\";\nimport Editor from \"./Editor/Editor\";\nimport {LevelDefinition} from \"../Backend/Level\";\nimport {readLevels, saveLevels} from \"../Backend/LevelLoader\";\n\nconst SceneModel = new MainSceneModel();\nSceneModel.confirmInitialized();\nconst SceneController = new MainSceneController(SceneModel);\n\n\n/**\n * Comment out the code above and uncomment the code below to run the Example1Scene\n * Which has a loaded 3D model and the billboard particle system skeleton code\n */\n// import {Example1SceneModel} from \"./Scene/ExampleScenes/Example1\";\n// import {Example1SceneController} from \"./Scene/ExampleScenes/Example1\";\n// const SceneModel = new Example1SceneModel();\n// SceneModel.confirmInitialized();\n// const SceneController = new Example1SceneController(SceneModel);\n\n\n// import {Example2SceneModel} from \"./Scene/ExampleScenes/Example2\";\n// import {Example2SceneController} from \"./Scene/ExampleScenes/Example2\";\n// const SceneModel = new Example2SceneModel();\n// SceneModel.confirmInitialized();\n// const SceneController = new Example2SceneController(SceneModel);\n\n// import {Example3SceneModel} from \"./Scene/ExampleScenes/Example3\";\n// import {Example3SceneController} from \"./Scene/ExampleScenes/Example3\";\n// const SceneModel = new Example3SceneModel();\n// SceneModel.confirmInitialized();\n// const SceneController = new Example3SceneController(SceneModel);\n\n\nlet appState = GetAppState();\n\nexport function MainComponent() {\n  const [levels, setLevels] = useState<LevelDefinition[]>(readLevels());\n  const [editorMode, setEditorMode] = useState<boolean>(false);\n\n  SceneController.enterEditorMode = () => {\n    setEditorMode(true);\n  };\n\n  useEffect(() => {\n    SceneController.updateLevels(levels);\n  }, []);\n\n  useEffect(() => {\n    const resizeHandle = () => {\n      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n      const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\n      const agc = document.body.querySelector<HTMLDivElement>(\".anigraphcontainer\");\n      const scale = Math.min(vw / 2000, vh / 2000);\n      const tx = (vw - scale * 2000) / 2;\n      const ty = (vh - scale * 2000) / 2;\n      agc!.style.transform = `translateX(${tx}px) translateY(${ty}px) scale(${scale})`;\n    };\n    resizeHandle();\n    window.addEventListener(\"resize\", resizeHandle);\n    return () => {\n      window.removeEventListener(\"resize\", resizeHandle);\n    };\n  }, []);\n\n  useEffect(() => {\n    SceneController.paused = editorMode;\n  }, [editorMode]);\n\n  return (\n    <div>\n      {!editorMode && <>\n        <ControlPanel appState={appState}></ControlPanel>\n        <AThreeJSContextComponent\n          controller={SceneController}\n        />\n      </>}\n      {editorMode && <Editor levels={levels} updateLevels={(levels) => {\n        setLevels(levels);\n        // debugger;\n        saveLevels(levels);\n      }} exit={() => {\n        window.location.reload();\n      }}/>}\n\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}