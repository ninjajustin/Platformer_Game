{"ast":null,"code":"import { ATexture } from \"../ATexture\";\nimport { Color } from \"../../math\";\nexport class ADataTexture extends ATexture {\n  get width() {\n    return this.pixelData.width;\n  }\n  get height() {\n    return this.pixelData.height;\n  }\n  get nChannels() {\n    return this.pixelData.nChannels;\n  }\n\n  /** Get set threejs */\n  set threejs(value) {\n    this._threejs = value;\n  }\n  get threejs() {\n    return this._threejs;\n  }\n  setTextureNeedsUpdate() {\n    let v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.threejs.needsUpdate = true;\n  }\n  static CheckWebGLSupport(renderer) {\n    if (!ADataTexture._support_checked) {\n      ADataTexture._TextureFloatSupport = renderer.getContext().getExtension('OES_texture_float') && renderer.context.getExtension('OES_texture_float_linear');\n      ADataTexture._support_checked = true;\n    }\n  }\n  setPixelData(data) {\n    this.pixelData = data;\n    this._CreateThreeJSTexture();\n  }\n  constructor(data) {\n    super();\n    this.pixelData = void 0;\n    if (data) {\n      this.setPixelData(data);\n    }\n  }\n  _CreateThreeJSTexture() {\n    if (this.threejs) {\n      throw new Error(\"Tried to create data texture but already have one!\");\n    }\n    this._setTHREETexture(this.pixelData.GetTHREEDataTexture());\n    this.setTextureNeedsUpdate();\n  }\n  setPixelNN(x, y, value) {\n    if (value instanceof Color) {\n      this.pixelData.setPixelNN(x, y, [value.r, value.g, value.b, value.a]);\n    } else {\n      // @ts-ignore\n      this.pixelData.setPixelNN(x, y, value);\n      // this.setTextureNeedsUpdate();\n    }\n  }\n\n  getPixelNN(x, y) {\n    return this.pixelData.getPixelNN(x, y);\n  }\n}\nADataTexture._support_checked = false;\nADataTexture._TextureFloatSupport = void 0;","map":{"version":3,"names":["ATexture","Color","ADataTexture","width","pixelData","height","nChannels","threejs","value","_threejs","setTextureNeedsUpdate","v","needsUpdate","CheckWebGLSupport","renderer","_support_checked","_TextureFloatSupport","getContext","getExtension","context","setPixelData","data","_CreateThreeJSTexture","constructor","Error","_setTHREETexture","GetTHREEDataTexture","setPixelNN","x","y","r","g","b","a","getPixelNN"],"sources":["/Users/home/Desktop/College/Fall 2022/CS_4620/cs4620-final-project/src/anigraph/rendering/image/ADataTexture.ts"],"sourcesContent":["import * as THREE from \"three\";\nimport {PixelData} from \"./pixeldata\";\nimport {ATexture} from \"../ATexture\";\nimport {Color} from \"../../math\";\n\n\nexport class ADataTexture<T extends PixelData<any>> extends ATexture{\n    static _support_checked:boolean=false;\n    static _TextureFloatSupport:any;\n    pixelData!:T;\n    get width(){\n        return this.pixelData.width;\n    }\n    get height(){\n        return this.pixelData.height;\n    }\n    get nChannels(){\n        return this.pixelData.nChannels;\n    }\n\n\n    /** Get set threejs */\n    set threejs(value:THREE.DataTexture){this._threejs = value;}\n    get threejs(){return this._threejs as THREE.DataTexture;}\n\n\n    setTextureNeedsUpdate(v:boolean=true){\n        this.threejs.needsUpdate=true;\n    }\n\n    static CheckWebGLSupport(renderer:THREE.WebGLRenderer){\n        if(!ADataTexture._support_checked) {\n            ADataTexture._TextureFloatSupport = renderer.getContext().getExtension('OES_texture_float') &&\n                renderer.context.getExtension('OES_texture_float_linear');\n            ADataTexture._support_checked = true;\n        }\n    }\n\n    setPixelData(data:T){\n        this.pixelData=data;\n        this._CreateThreeJSTexture();\n    }\n\n    constructor(data?:T, ...args:any[]) {\n        super();\n        if(data){\n            this.setPixelData(data);\n        }\n    }\n\n    _CreateThreeJSTexture(){\n        if(this.threejs){\n            throw new Error(\"Tried to create data texture but already have one!\")\n        }\n        this._setTHREETexture(this.pixelData.GetTHREEDataTexture());\n        this.setTextureNeedsUpdate();\n    }\n\n    setPixelNN(x: number, y: number, value: ArrayLike<number> & ArrayLike<bigint> | number | Color) {\n        if (value instanceof Color) {\n            this.pixelData.setPixelNN(x, y, [value.r, value.g, value.b, value.a]);\n        } else {\n            // @ts-ignore\n            this.pixelData.setPixelNN(x, y, value);\n            // this.setTextureNeedsUpdate();\n        }\n    }\n\n    getPixelNN(x:number,y:number){\n        return this.pixelData.getPixelNN(x,y);\n    }\n}\n\n\n\n\n\n\n\n"],"mappings":"AAEA,SAAQA,QAAQ,QAAO,aAAa;AACpC,SAAQC,KAAK,QAAO,YAAY;AAGhC,OAAO,MAAMC,YAAY,SAAmCF,QAAQ;EAIhE,IAAIG,KAAK,GAAE;IACP,OAAO,IAAI,CAACC,SAAS,CAACD,KAAK;EAC/B;EACA,IAAIE,MAAM,GAAE;IACR,OAAO,IAAI,CAACD,SAAS,CAACC,MAAM;EAChC;EACA,IAAIC,SAAS,GAAE;IACX,OAAO,IAAI,CAACF,SAAS,CAACE,SAAS;EACnC;;EAGA;EACA,IAAIC,OAAO,CAACC,KAAuB,EAAC;IAAC,IAAI,CAACC,QAAQ,GAAGD,KAAK;EAAC;EAC3D,IAAID,OAAO,GAAE;IAAC,OAAO,IAAI,CAACE,QAAQ;EAAsB;EAGxDC,qBAAqB,GAAgB;IAAA,IAAfC,CAAS,uEAAC,IAAI;IAChC,IAAI,CAACJ,OAAO,CAACK,WAAW,GAAC,IAAI;EACjC;EAEA,OAAOC,iBAAiB,CAACC,QAA4B,EAAC;IAClD,IAAG,CAACZ,YAAY,CAACa,gBAAgB,EAAE;MAC/Bb,YAAY,CAACc,oBAAoB,GAAGF,QAAQ,CAACG,UAAU,EAAE,CAACC,YAAY,CAAC,mBAAmB,CAAC,IACvFJ,QAAQ,CAACK,OAAO,CAACD,YAAY,CAAC,0BAA0B,CAAC;MAC7DhB,YAAY,CAACa,gBAAgB,GAAG,IAAI;IACxC;EACJ;EAEAK,YAAY,CAACC,IAAM,EAAC;IAChB,IAAI,CAACjB,SAAS,GAACiB,IAAI;IACnB,IAAI,CAACC,qBAAqB,EAAE;EAChC;EAEAC,WAAW,CAACF,IAAO,EAAiB;IAChC,KAAK,EAAE;IAAC,KAnCZjB,SAAS;IAoCL,IAAGiB,IAAI,EAAC;MACJ,IAAI,CAACD,YAAY,CAACC,IAAI,CAAC;IAC3B;EACJ;EAEAC,qBAAqB,GAAE;IACnB,IAAG,IAAI,CAACf,OAAO,EAAC;MACZ,MAAM,IAAIiB,KAAK,CAAC,oDAAoD,CAAC;IACzE;IACA,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAACrB,SAAS,CAACsB,mBAAmB,EAAE,CAAC;IAC3D,IAAI,CAAChB,qBAAqB,EAAE;EAChC;EAEAiB,UAAU,CAACC,CAAS,EAAEC,CAAS,EAAErB,KAA6D,EAAE;IAC5F,IAAIA,KAAK,YAAYP,KAAK,EAAE;MACxB,IAAI,CAACG,SAAS,CAACuB,UAAU,CAACC,CAAC,EAAEC,CAAC,EAAE,CAACrB,KAAK,CAACsB,CAAC,EAAEtB,KAAK,CAACuB,CAAC,EAAEvB,KAAK,CAACwB,CAAC,EAAExB,KAAK,CAACyB,CAAC,CAAC,CAAC;IACzE,CAAC,MAAM;MACH;MACA,IAAI,CAAC7B,SAAS,CAACuB,UAAU,CAACC,CAAC,EAAEC,CAAC,EAAErB,KAAK,CAAC;MACtC;IACJ;EACJ;;EAEA0B,UAAU,CAACN,CAAQ,EAACC,CAAQ,EAAC;IACzB,OAAO,IAAI,CAACzB,SAAS,CAAC8B,UAAU,CAACN,CAAC,EAACC,CAAC,CAAC;EACzC;AACJ;AAjEa3B,YAAY,CACda,gBAAgB,GAAS,KAAK;AAD5Bb,YAAY,CAEdc,oBAAoB"},"metadata":{},"sourceType":"module"}