{"ast":null,"code":"import { A3DModelLoader, ACameraModel, APointLightModel, Color, GetAppState, NodeTransform3D, V3, Vec2, Vec3 } from \"../../../../../anigraph\";\nimport { BaseSceneModel, CharacterModel } from \"../../../../BaseClasses\";\nimport { ExampleParticleSystemModel, ExampleThreeJSNodeModel, TerrainModel } from \"../../../Nodes\";\nimport { ATexture } from \"../../../../../anigraph/rendering/ATexture\";\nimport { AppConfigs } from \"../../../../AppConfigs\";\nimport { ExampleLoadedCharacterModel } from \"../../../Nodes/Loaded/ExampleLoadedCharacterModel\";\nimport { ABasicShaderModel } from \"../../../../../anigraph/rendering/shadermodels/ABasicShaderModel\";\nimport { AddStandardUniforms } from \"../HowToAddUniformToControlPanel\";\nimport { BillboardParticleSystemModel } from \"../../../Nodes/BillboardParticleSystem\";\n// import {AddStandardUniforms} from \"../HowToAddUniformToControlPanel\";\n\nlet appState = GetAppState();\n\n/**\n * Here we will define some enums that are simple strings.\n * These will be what we call different shader model instances. Note that we could just type these strings directly into\n * the code when we use them, but defining them as an enum will help avoid bugs caused by typos, and it will let you use\n * refactoring features of your IDE if you want to change these variables later.\n */\nvar MyMaterialNames;\n(function (MyMaterialNames) {\n  MyMaterialNames[\"basicshader1\"] = \"basicshader1\";\n  MyMaterialNames[\"mymaterial2\"] = \"mymaterial2\";\n})(MyMaterialNames || (MyMaterialNames = {}));\nexport class Example1SceneModel extends BaseSceneModel {\n  constructor() {\n    super(...arguments);\n    this.terrain = void 0;\n    this._player = void 0;\n    this.loaded3DModel = void 0;\n    this.playerMaterial = void 0;\n    this.catModel = void 0;\n    this.catTexture = void 0;\n    this.bots = [];\n    this.billboardParticles = void 0;\n  }\n  get player() {\n    return this._player;\n  }\n  set player(v) {\n    this._player = v;\n  }\n  async loadModelFromFile(path, transform) {\n    /**\n     * Here we need to load the .ply file into an AObject3DModelWrapper instance\n     */\n    let meshObject = await A3DModelLoader.LoadFromPath(path);\n    meshObject.sourceTransform = transform !== null && transform !== void 0 ? transform : new NodeTransform3D();\n    return meshObject;\n  }\n  async PreloadAssets() {\n    await super.PreloadAssets();\n    await TerrainModel.LoadShader();\n    await CharacterModel.LoadShader();\n    await ExampleParticleSystemModel.LoadShader();\n    const self = this;\n\n    /**\n     * Here we will create a shader model and name it with the string defined in `MyMaterialNames.basicshader1`.\n     * The shaderName argument to CreateModel is the name used in the shader folder and glsl files under\n     * `public/shaders/`\n     */\n    let basicshader1ShaderMaterialModel = await ABasicShaderModel.CreateModel(\"customexample1\");\n    await this.materials.setMaterialModel(MyMaterialNames.basicshader1, basicshader1ShaderMaterialModel);\n\n    /**\n     * If we want to use vertex colors in our shader, we need to set useVertexColors to true.\n     * This will turn vertex colors on by default for materials created with this model.\n     * Each time you create a material, you can turn off vertex colors for that material if you want.\n     */\n    basicshader1ShaderMaterialModel.usesVertexColors = true;\n\n    /**\n     * Once a shader model is set like this, we can access it with the material name we assigned it to like so:\n     */\n    this.playerMaterial = this.materials.CreateShaderMaterial(MyMaterialNames.basicshader1);\n\n    /**\n     * Ok, now let's load a 3D model to use for our player.\n     */\n\n    /**\n     * We could use a dragon with vertex colors specified in a .ply file\n     */\n    // let dragonTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ(),Vec3.UnitX().times(-1), 0.005);\n    // this.loaded3DModel = await this.loadModelFromFile(\"./models/ply/dragon_color_onground.ply\", dragonTransform);\n    let birdTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    /**\n     * Our cat comes with a texture, so lets add it to the character material\n     */\n    let birdTexture = await ATexture.LoadAsync(\"./models/gltf/Bird_diffuse.jpg\");\n\n    /**\n     * Or a cat!!! Here it is defined as a .glb file, which you can export from blender by exporting a mesh as a gltf format\n     */\n    let catTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/cat.glb\", catTransform);\n    /**\n     * Our cat comes with a texture, so lets add it to the character material\n     */\n    let catTexture = await ATexture.LoadAsync(\"./models/gltf/Cat_diffuse.jpg\");\n    this.playerMaterial.setTexture('diffuse', catTexture);\n\n    // dolphin object\n    let dolphinTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    let dolphinTexture = await ATexture.LoadAsync(\"./models/gltf/Dolphin_diffuse.jpg\");\n\n    //city object\n    let cityTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n\n    // let cityTexture = await ATexture.LoadAsync(\"./models/gltf/City_diffuse.jpeg\");\n    // this.playerMaterial.setTexture('diffuse', cityTexture);\n\n    //mountains object\n    let mountainsTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 1.0);\n    let mountainsTexture = await ATexture.LoadAsync(\"./models/gltf/Mountains_diffuse.jpg\");\n    let templeTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.02);\n    let templeTexture = await ATexture.LoadAsync(\"./models/gltf/Temple_diffuse.png\");\n\n    //street crashes\n    let streetTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    let streetTexture = await ATexture.LoadAsync(\"./models/gltf/Street_diffuse.png\");\n\n    //palm tree\n    let palmTreeTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.005);\n    let palmTreeTexture = await ATexture.LoadAsync(\"./models/gltf/Palm_tree_diffuse.jpg\");\n\n    //plane, wings don't load\n    // let planeTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.003);\n    // let planeTexture = await ATexture.LoadAsync(\"./models/gltf/Airplane_body_diff.jpg\", \"./models/gltf/Airplane_tail_diff.jpg\");\n\n    //palm trees, only shows one palm tree\n    let palmTreesTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.005);\n    let palmTreesTexture = await ATexture.LoadAsync(\"./models/gltf/Palm_tree_diffuse.jpg\");\n\n    // grass object\n    let grassTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    let grassTexture = await ATexture.LoadAsync(\"./models/gltf/Grass_diffuse.jpg\");\n\n    // duck object\n    let duckTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    let duckTexture = await ATexture.LoadAsync(\"./models/gltf/Duck_diffuse.jpg\");\n\n    // fish object\n    //Can't figure out how to raise objects that start on below ground level when first used\n    let fishTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    let fishTexture = await ATexture.LoadAsync(\"./models/gltf/Fish_diffuse.jpg\");\n\n    // monkey object\n    let monkeyTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    let monkeyTexture = await ATexture.LoadAsync(\"./models/gltf/Monkey_diffuse.jpg\");\n\n    // turtle object\n    let turtleTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    let turtleTexture = await ATexture.LoadAsync(\"./models/gltf/Turtle_diffuse.jpg\");\n\n    //DESERT OBJECTS\n    let transform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    let transform1 = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n\n    // snake object\n    let snakeTexture = await ATexture.LoadAsync(\"./models/gltf/Snake_diffuse.jpg\");\n\n    // cactus object\n    let cactusTexture = await ATexture.LoadAsync(\"./models/gltf/Cactus_diffuse.jpg\");\n\n    // camel object\n    let camelTexture = await ATexture.LoadAsync(\"./models/gltf/Camel_diffuse1.jpg\");\n\n    // skull object\n    let skullTexture = await ATexture.LoadAsync(\"./models/gltf/Skull_diffuse.jpg\");\n\n    // dragon object\n    let dragonTexture = await ATexture.LoadAsync(\"./models/gltf/Dragon_diffuse1.jpg\");\n\n    //desert background\n    let desertTexture = await ATexture.LoadAsync(\"./models/gltf/Desert_diffuse.jpg\");\n\n    //tumbleweed object\n    let tumbleweedTexture = await ATexture.LoadAsync(\"./models/gltf/Tumbleweed_diffuse.jpg\");\n\n    //scorpion object\n    let scorpionTexture = await ATexture.LoadAsync(\"./models/gltf/scorpion_diffuse1.jpg\");\n\n    // this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/cat.glb\", catTransform);\n    // this.playerMaterial.setTexture('diffuse', catTexture);\n\n    this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/snake.glb\", transform);\n    this.playerMaterial.setTexture('diffuse', snakeTexture);\n  }\n  initCamera() {\n    this.cameraModel = ACameraModel.CreatePerspectiveFOV(90, 1, 0.01, 10);\n    this.cameraModel.setPose(NodeTransform3D.LookAt(V3(-0.2, 0.8, 0.75), V3(0, 0, 0.5), V3(0, 0, 0.4)));\n  }\n\n  /**\n   * The view light is a light that is attached to the camera.\n   */\n  initViewLight() {\n    /**\n     * Create a point light\n     * You can have up to 16 point lights in the scene at once by default\n     */\n    this.viewLight = new APointLightModel(this.camera.pose, Color.FromString(\"#ffffff\"), 0.5, AppConfigs.ViewLightRange, 1);\n\n    /**\n     * Add it as a child of the camera model so that it will move with the camera\n     */\n    this.cameraModel.addChild(this.viewLight);\n  }\n  async initTerrain() {\n    this.terrain = await TerrainModel.Create(AppConfigs.GroundTexture,\n    // texture\n    AppConfigs.TerrainScaleX,\n    // scaleX\n    AppConfigs.TerrainScaleY,\n    // scaleY\n    AppConfigs.TerrainDataTextureWidth,\n    // number of vertices wide\n    AppConfigs.TerrainDataTextureHeight,\n    // number of vertices tall\n    undefined,\n    // transform for terrain, identity if left blank\n    AppConfigs.TerrainWrapTextureX,\n    // number of times texture should wrap across surface in X\n    AppConfigs.TerrainWrapTextureY // number of times texture should wrap across surface in Y\n    );\n\n    //this.addChild(this.terrain);\n  }\n\n  async initCharacters() {\n    /**\n     * First we will initialze the player and add it to the scene.\n     */\n    // this.playerTexture = await ATexture.LoadAsync(\"./images/tanktexburngreen.jpeg\")\n    // this.player = await PlayerModel.Create(this.playerTexture);\n\n    /**\n     * Here we will initialize our player using the loaded .ply model and the shader material model we attached to\n     * the string MyMaterialNames.basicshader1\n     * @type {ExampleLoadedCharacterModel}\n     */\n    let transform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    this.player = new ExampleLoadedCharacterModel(this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/snake.glb\", transform), this.playerMaterial);\n    let snakeTexture = await ATexture.LoadAsync(\"./models/gltf/Snake_diffuse.jpg\");\n    this.player.material.setTexture('diffuse', snakeTexture);\n    AddStandardUniforms(this.player.material);\n    this.addChild(this.player);\n\n    /**\n     * Then we will create a bunch of bots with different cat faces...\n     * Let's make each one a child of the last.\n     */\n    // let parent:AModel = this;\n    // for(let e=0;e<6; e++) {\n    //     let bot = await BotModel.Create(`./images/catfaces/catface0${e + 1}.jpeg`);\n    //     bot.position = new Vec3((Math.random() - 0.5) * AppConfigs.TerrainScaleX, (Math.random() - 0.5) * AppConfigs.TerrainScaleY, 0);\n    //     bot.mass = 50;\n    //     this.bots.push(bot);\n    //     parent.addChild(bot);\n    //     parent = bot;\n    // }\n  }\n\n  async initCharacters1() {\n    let transform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n    this.player = new ExampleLoadedCharacterModel(this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/camel.glb\", transform), this.playerMaterial);\n    //this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/camel.glb\", transform);\n    let camelTexture = await ATexture.LoadAsync(\"./models/gltf/Camel_diffuse1.jpg\");\n    this.player.material.setTexture('diffuse', camelTexture);\n    AddStandardUniforms(this.player.material);\n    this.addChild(this.player);\n  }\n  async initScene() {\n    await this.initTerrain();\n    await this.initCharacters1();\n    await this.initCharacters2();\n    this.addChild(new ExampleThreeJSNodeModel());\n\n    /**\n     * Now an example particle system.\n     */\n    // let particles = new ExampleParticleSystemModel();\n    // particles.orbitRadius = 0.3;\n    // let radius = 0.05;\n    // particles.addParticle(new SphereParticle(undefined, undefined, radius));\n    // particles.addParticle(new SphereParticle(undefined, undefined, radius));\n    // particles.addParticle(new SphereParticle(undefined, undefined, radius));\n    //\n    // /**\n    //  * We will add the particle system to one of the bots for kicks...\n    //  */\n    // this.bots[this.bots.length-1].addChild(particles);\n\n    /**\n     * Now let's initialize the view light\n     */\n    this.initViewLight();\n\n    /**\n     * Let's add the particle system controls to the control pannel...\n     */\n    // BillboardParticleSystemModel.AddParticleSystemControls();\n\n    /**\n     * And now let's create our particle system\n     */\n    this.billboardParticles = new BillboardParticleSystemModel(200);\n    //this.addChild(this.billboardParticles);\n  }\n\n  timeUpdate(t) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    this.basicUpdate(t, ...args);\n    // this.spinBots(t, ...args);\n  }\n\n  /**\n   * Here we will separate out logic that check to see if a particle (characters implement the particle interface, so\n   * this can be used on characters as well) intersects the terrain.\n   * @param particle\n   */\n  adjustParticleHeight(particle) {\n    let height = this.terrain.getTerrainHeightAtPoint(particle.position.xy);\n    if (particle.position.z < height) {\n      particle.position.z = height;\n    }\n  }\n  basicUpdate(t) {\n    /**\n     * We can call timeUpdate on all of the model nodes in the scene here, which will trigger any updates that they\n     * individually define.\n     */\n    for (let c of this.getDescendantList()) {\n      c.timeUpdate(t);\n    }\n    this.adjustParticleHeight(this.player);\n    for (let ei = 0; ei < this.bots.length; ei++) {\n      let e = this.bots[ei];\n      /**\n       * adjust their height\n       */\n      this.adjustParticleHeight(e);\n    }\n  }\n  spinBots(t) {\n    /**\n     * Now lets update bots\n     */\n    let orbitradius = 0.25;\n    for (let ei = 0; ei < this.bots.length; ei++) {\n      let e = this.bots[ei];\n      e.position.xy = new Vec2(Math.cos(t * (ei + 1)), Math.sin(t * (ei + 1))).times(orbitradius);\n      this.adjustParticleHeight(e);\n    }\n  }\n  getCoordinatesForCursorEvent(event) {\n    var _event$ndcCursor;\n    return (_event$ndcCursor = event.ndcCursor) !== null && _event$ndcCursor !== void 0 ? _event$ndcCursor : new Vec2();\n  }\n}","map":{"version":3,"names":["A3DModelLoader","ACameraModel","APointLightModel","Color","GetAppState","NodeTransform3D","V3","Vec2","Vec3","BaseSceneModel","CharacterModel","ExampleParticleSystemModel","ExampleThreeJSNodeModel","TerrainModel","ATexture","AppConfigs","ExampleLoadedCharacterModel","ABasicShaderModel","AddStandardUniforms","BillboardParticleSystemModel","appState","MyMaterialNames","Example1SceneModel","terrain","_player","loaded3DModel","playerMaterial","catModel","catTexture","bots","billboardParticles","player","v","loadModelFromFile","path","transform","meshObject","LoadFromPath","sourceTransform","PreloadAssets","LoadShader","self","basicshader1ShaderMaterialModel","CreateModel","materials","setMaterialModel","basicshader1","usesVertexColors","CreateShaderMaterial","birdTransform","FromPositionZUpAndScale","UnitZ","times","UnitY","birdTexture","LoadAsync","catTransform","setTexture","dolphinTransform","dolphinTexture","cityTransform","mountainsTransform","mountainsTexture","templeTransform","templeTexture","streetTransform","streetTexture","palmTreeTransform","palmTreeTexture","palmTreesTransform","palmTreesTexture","grassTransform","grassTexture","duckTransform","duckTexture","fishTransform","fishTexture","monkeyTransform","monkeyTexture","turtleTransform","turtleTexture","transform1","snakeTexture","cactusTexture","camelTexture","skullTexture","dragonTexture","desertTexture","tumbleweedTexture","scorpionTexture","initCamera","cameraModel","CreatePerspectiveFOV","setPose","LookAt","initViewLight","viewLight","camera","pose","FromString","ViewLightRange","addChild","initTerrain","Create","GroundTexture","TerrainScaleX","TerrainScaleY","TerrainDataTextureWidth","TerrainDataTextureHeight","undefined","TerrainWrapTextureX","TerrainWrapTextureY","initCharacters","material","initCharacters1","initScene","initCharacters2","timeUpdate","t","args","basicUpdate","adjustParticleHeight","particle","height","getTerrainHeightAtPoint","position","xy","z","c","getDescendantList","ei","length","e","spinBots","orbitradius","Math","cos","sin","getCoordinatesForCursorEvent","event","ndcCursor"],"sources":["/Users/home/Desktop/cs4620-final-project/src/app/main/Scene/ExampleScenes/Example1/Example1SceneModel.ts"],"sourcesContent":["import {\n    A3DModelLoader,\n    ACameraModel, AInteractionEvent,\n    AModel, AObject3DModelWrapper,\n    APointLightModel, AShaderMaterial,\n    Color,\n    GetAppState,\n    NodeTransform3D, Quaternion,\n    V3, Vec2,\n    Vec3\n} from \"../../../../../anigraph\";\nimport {BaseSceneModel, CharacterModel, CharacterModelInterface} from \"../../../../BaseClasses\";\nimport {\n    BotModel,\n    ExampleParticleSystemModel,\n    ExampleThreeJSNodeModel,\n    PlayerModel,\n    SphereParticle,\n    TerrainModel\n} from \"../../../Nodes\";\nimport {ATexture} from \"../../../../../anigraph/rendering/ATexture\";\nimport {AppConfigs} from \"../../../../AppConfigs\";\nimport {Particle3D} from \"../../../../../anigraph/physics/AParticle3D\";\nimport {LoadedCharacterModel} from \"../../../../BaseClasses/LoadedCharacterModel\";\nimport {ExampleLoadedCharacterModel} from \"../../../Nodes/Loaded/ExampleLoadedCharacterModel\";\nimport {ABasicShaderModel} from \"../../../../../anigraph/rendering/shadermodels/ABasicShaderModel\";\nimport {AddStandardUniforms} from \"../HowToAddUniformToControlPanel\";\nimport {json} from \"stream/consumers\";\nimport {BillboardParticleSystemModel} from \"../../../Nodes/BillboardParticleSystem\";\n// import {AddStandardUniforms} from \"../HowToAddUniformToControlPanel\";\n\nlet appState = GetAppState();\n\n/**\n * Here we will define some enums that are simple strings.\n * These will be what we call different shader model instances. Note that we could just type these strings directly into\n * the code when we use them, but defining them as an enum will help avoid bugs caused by typos, and it will let you use\n * refactoring features of your IDE if you want to change these variables later.\n */\nenum MyMaterialNames{\n    basicshader1=\"basicshader1\",\n    mymaterial2=\"mymaterial2\",\n}\n\n\nexport class Example1SceneModel extends BaseSceneModel {\n    /**\n     * Our custom terrain model\n     */\n    terrain!:TerrainModel;\n\n    /**\n     * Our custom player model, and a texture to use for our player\n     */\n    _player!:CharacterModelInterface;\n    get player():CharacterModelInterface{\n        return this._player as LoadedCharacterModel;\n    }\n    set player(v:CharacterModelInterface){\n        this._player = v;\n    }\n    loaded3DModel!:AObject3DModelWrapper;\n    playerMaterial!:AShaderMaterial;\n\n\n    catModel!:AObject3DModelWrapper;\n    catTexture!:ATexture;\n\n    /**\n     * An array of bots. Your\n     */\n    bots:BotModel[]=[];\n\n    billboardParticles!:BillboardParticleSystemModel;\n\n\n    async loadModelFromFile(path:string, transform?:NodeTransform3D){\n        /**\n         * Here we need to load the .ply file into an AObject3DModelWrapper instance\n         */\n        let meshObject = await A3DModelLoader.LoadFromPath(path)\n        meshObject.sourceTransform = transform??new NodeTransform3D();\n        return meshObject;\n    }\n\n\n    async PreloadAssets() {\n        await super.PreloadAssets();\n        await TerrainModel.LoadShader();\n        await CharacterModel.LoadShader();\n        await ExampleParticleSystemModel.LoadShader();\n\n\n        const self = this;\n\n        /**\n         * Here we will create a shader model and name it with the string defined in `MyMaterialNames.basicshader1`.\n         * The shaderName argument to CreateModel is the name used in the shader folder and glsl files under\n         * `public/shaders/`\n         */\n        let basicshader1ShaderMaterialModel = await ABasicShaderModel.CreateModel(\"customexample1\");\n        await this.materials.setMaterialModel(MyMaterialNames.basicshader1, basicshader1ShaderMaterialModel);\n\n        /**\n         * If we want to use vertex colors in our shader, we need to set useVertexColors to true.\n         * This will turn vertex colors on by default for materials created with this model.\n         * Each time you create a material, you can turn off vertex colors for that material if you want.\n         */\n        basicshader1ShaderMaterialModel.usesVertexColors=true;\n\n        /**\n         * Once a shader model is set like this, we can access it with the material name we assigned it to like so:\n         */\n        this.playerMaterial = this.materials.CreateShaderMaterial(MyMaterialNames.basicshader1);\n\n\n\n        /**\n         * Ok, now let's load a 3D model to use for our player.\n         */\n\n\n        /**\n         * We could use a dragon with vertex colors specified in a .ply file\n         */\n        // let dragonTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ(),Vec3.UnitX().times(-1), 0.005);\n        // this.loaded3DModel = await this.loadModelFromFile(\"./models/ply/dragon_color_onground.ply\", dragonTransform);\n        let birdTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        /**\n         * Our cat comes with a texture, so lets add it to the character material\n         */\n        let birdTexture = await ATexture.LoadAsync(\"./models/gltf/Bird_diffuse.jpg\");\n\n\n        /**\n         * Or a cat!!! Here it is defined as a .glb file, which you can export from blender by exporting a mesh as a gltf format\n         */\n        let catTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/cat.glb\", catTransform);\n        /**\n         * Our cat comes with a texture, so lets add it to the character material\n         */\n        let catTexture = await ATexture.LoadAsync(\"./models/gltf/Cat_diffuse.jpg\");\n        this.playerMaterial.setTexture('diffuse', catTexture);\n\n        // dolphin object\n        let dolphinTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        let dolphinTexture = await ATexture.LoadAsync(\"./models/gltf/Dolphin_diffuse.jpg\");\n\n\n        //city object\n        let cityTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n\n        // let cityTexture = await ATexture.LoadAsync(\"./models/gltf/City_diffuse.jpeg\");\n        // this.playerMaterial.setTexture('diffuse', cityTexture);\n\n        //mountains object\n        let mountainsTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 1.0);\n        let mountainsTexture = await ATexture.LoadAsync(\"./models/gltf/Mountains_diffuse.jpg\");\n\n        let templeTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.02);\n        let templeTexture = await ATexture.LoadAsync(\"./models/gltf/Temple_diffuse.png\");\n\n        //street crashes\n        let streetTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        let streetTexture = await ATexture.LoadAsync(\"./models/gltf/Street_diffuse.png\");\n\n        //palm tree\n        let palmTreeTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.005);\n        let palmTreeTexture = await ATexture.LoadAsync(\"./models/gltf/Palm_tree_diffuse.jpg\");\n\n        //plane, wings don't load\n        // let planeTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.003);\n        // let planeTexture = await ATexture.LoadAsync(\"./models/gltf/Airplane_body_diff.jpg\", \"./models/gltf/Airplane_tail_diff.jpg\");\n\n        //palm trees, only shows one palm tree\n        let palmTreesTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.005);\n        let palmTreesTexture = await ATexture.LoadAsync(\"./models/gltf/Palm_tree_diffuse.jpg\");\n\n        // grass object\n        let grassTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        let grassTexture = await ATexture.LoadAsync(\"./models/gltf/Grass_diffuse.jpg\");\n\n        // duck object\n        let duckTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        let duckTexture = await ATexture.LoadAsync(\"./models/gltf/Duck_diffuse.jpg\");\n\n        // fish object\n        //Can't figure out how to raise objects that start on below ground level when first used\n        let fishTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        let fishTexture = await ATexture.LoadAsync(\"./models/gltf/Fish_diffuse.jpg\");\n\n        // monkey object\n        let monkeyTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        let monkeyTexture = await ATexture.LoadAsync(\"./models/gltf/Monkey_diffuse.jpg\");\n\n        // turtle object\n        let turtleTransform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        let turtleTexture = await ATexture.LoadAsync(\"./models/gltf/Turtle_diffuse.jpg\");\n\n\n        //DESERT OBJECTS\n        let transform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        let transform1 = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n\n        // snake object\n        let snakeTexture = await ATexture.LoadAsync(\"./models/gltf/Snake_diffuse.jpg\");\n\n        // cactus object\n        let cactusTexture = await ATexture.LoadAsync(\"./models/gltf/Cactus_diffuse.jpg\");\n\n        // camel object\n        let camelTexture = await ATexture.LoadAsync(\"./models/gltf/Camel_diffuse1.jpg\");\n\n        // skull object\n        let skullTexture = await ATexture.LoadAsync(\"./models/gltf/Skull_diffuse.jpg\");\n\n        // dragon object\n        let dragonTexture = await ATexture.LoadAsync(\"./models/gltf/Dragon_diffuse1.jpg\");\n\n        //desert background\n        let desertTexture = await ATexture.LoadAsync(\"./models/gltf/Desert_diffuse.jpg\");\n\n        //tumbleweed object\n        let tumbleweedTexture = await ATexture.LoadAsync(\"./models/gltf/Tumbleweed_diffuse.jpg\");\n\n        //scorpion object\n        let scorpionTexture = await ATexture.LoadAsync(\"./models/gltf/scorpion_diffuse1.jpg\");\n\n        // this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/cat.glb\", catTransform);\n        // this.playerMaterial.setTexture('diffuse', catTexture);\n\n        this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/snake.glb\", transform);\n        this.playerMaterial.setTexture('diffuse', snakeTexture);\n\n    }\n\n\n    initCamera() {\n        this.cameraModel = ACameraModel.CreatePerspectiveFOV(90, 1, 0.01, 10);\n\n        this.cameraModel.setPose(\n            NodeTransform3D.LookAt(\n                V3(-0.2, 0.8, 0.75), V3(0,0,0.5),\n                V3(0,0,0.4)\n            )\n        )\n\n    }\n\n    /**\n     * The view light is a light that is attached to the camera.\n     */\n    initViewLight(){\n\n        /**\n         * Create a point light\n         * You can have up to 16 point lights in the scene at once by default\n         */\n        this.viewLight = new APointLightModel(\n            this.camera.pose,\n            Color.FromString(\"#ffffff\"),\n            0.5,\n            AppConfigs.ViewLightRange,\n            1\n        );\n\n        /**\n         * Add it as a child of the camera model so that it will move with the camera\n         */\n        this.cameraModel.addChild(this.viewLight);\n    }\n\n    async initTerrain(){\n        this.terrain = await TerrainModel.Create(\n            AppConfigs.GroundTexture, // texture\n            AppConfigs.TerrainScaleX, // scaleX\n            AppConfigs.TerrainScaleY, // scaleY\n            AppConfigs.TerrainDataTextureWidth, // number of vertices wide\n            AppConfigs.TerrainDataTextureHeight, // number of vertices tall\n            undefined, // transform for terrain, identity if left blank\n            AppConfigs.TerrainWrapTextureX, // number of times texture should wrap across surface in X\n            AppConfigs.TerrainWrapTextureY, // number of times texture should wrap across surface in Y\n        );\n\n\n        //this.addChild(this.terrain);\n    }\n\n\n\n    async initCharacters(){\n        /**\n         * First we will initialze the player and add it to the scene.\n         */\n        // this.playerTexture = await ATexture.LoadAsync(\"./images/tanktexburngreen.jpeg\")\n        // this.player = await PlayerModel.Create(this.playerTexture);\n\n        /**\n         * Here we will initialize our player using the loaded .ply model and the shader material model we attached to\n         * the string MyMaterialNames.basicshader1\n         * @type {ExampleLoadedCharacterModel}\n         */\n        let transform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        this.player = new ExampleLoadedCharacterModel(\n            this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/snake.glb\", transform),\n            this.playerMaterial\n        );\n        let snakeTexture = await ATexture.LoadAsync(\"./models/gltf/Snake_diffuse.jpg\");\n        this.player.material.setTexture('diffuse', snakeTexture);\n        AddStandardUniforms(this.player.material);\n        this.addChild(this.player);\n\n        /**\n         * Then we will create a bunch of bots with different cat faces...\n         * Let's make each one a child of the last.\n         */\n        // let parent:AModel = this;\n        // for(let e=0;e<6; e++) {\n        //     let bot = await BotModel.Create(`./images/catfaces/catface0${e + 1}.jpeg`);\n        //     bot.position = new Vec3((Math.random() - 0.5) * AppConfigs.TerrainScaleX, (Math.random() - 0.5) * AppConfigs.TerrainScaleY, 0);\n        //     bot.mass = 50;\n        //     this.bots.push(bot);\n        //     parent.addChild(bot);\n        //     parent = bot;\n        // }\n    }\n\n    async initCharacters1() {\n        let transform = NodeTransform3D.FromPositionZUpAndScale(V3(), Vec3.UnitZ().times(1), Vec3.UnitY().times(-1), 0.01);\n        this.player = new ExampleLoadedCharacterModel(\n            this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/camel.glb\", transform),\n            this.playerMaterial\n        );\n        //this.loaded3DModel = await this.loadModelFromFile(\"./models/gltf/camel.glb\", transform);\n        let camelTexture = await ATexture.LoadAsync(\"./models/gltf/Camel_diffuse1.jpg\");\n        this.player.material.setTexture('diffuse', camelTexture);\n        AddStandardUniforms(this.player.material);\n        this.addChild(this.player);\n    }\n\n    async initScene() {\n        await this.initTerrain();\n        await this.initCharacters1();\n        await this.initCharacters2();\n\n        this.addChild(new ExampleThreeJSNodeModel());\n\n        /**\n         * Now an example particle system.\n         */\n        // let particles = new ExampleParticleSystemModel();\n        // particles.orbitRadius = 0.3;\n        // let radius = 0.05;\n        // particles.addParticle(new SphereParticle(undefined, undefined, radius));\n        // particles.addParticle(new SphereParticle(undefined, undefined, radius));\n        // particles.addParticle(new SphereParticle(undefined, undefined, radius));\n        //\n        // /**\n        //  * We will add the particle system to one of the bots for kicks...\n        //  */\n        // this.bots[this.bots.length-1].addChild(particles);\n\n        /**\n         * Now let's initialize the view light\n         */\n        this.initViewLight();\n\n        /**\n         * Let's add the particle system controls to the control pannel...\n         */\n        // BillboardParticleSystemModel.AddParticleSystemControls();\n\n        /**\n         * And now let's create our particle system\n         */\n        this.billboardParticles = new BillboardParticleSystemModel(200);\n        //this.addChild(this.billboardParticles);\n\n    }\n\n    timeUpdate(t: number, ...args:any[]) {\n        this.basicUpdate(t, ...args);\n        // this.spinBots(t, ...args);\n    }\n\n    /**\n     * Here we will separate out logic that check to see if a particle (characters implement the particle interface, so\n     * this can be used on characters as well) intersects the terrain.\n     * @param particle\n     */\n    adjustParticleHeight(particle:Particle3D){\n        let height = this.terrain.getTerrainHeightAtPoint(particle.position.xy);\n        if(particle.position.z<height){particle.position.z = height;}\n    }\n\n    basicUpdate(t:number, ...args:any[]){\n        /**\n         * We can call timeUpdate on all of the model nodes in the scene here, which will trigger any updates that they\n         * individually define.\n         */\n        for(let c of this.getDescendantList()){\n            c.timeUpdate(t);\n        }\n\n        this.adjustParticleHeight(this.player);\n        for(let ei=0;ei<this.bots.length;ei++){\n            let e = this.bots[ei];\n            /**\n             * adjust their height\n             */\n            this.adjustParticleHeight(e);\n        }\n    }\n\n    spinBots(t:number, ...args:any[]){\n        /**\n         * Now lets update bots\n         */\n        let orbitradius = 0.25;\n        for(let ei=0;ei<this.bots.length;ei++){\n            let e = this.bots[ei];\n            e.position.xy = new Vec2(Math.cos(t*(ei+1)), Math.sin(t*(ei+1))).times(orbitradius);\n            this.adjustParticleHeight(e);\n        }\n    }\n\n\n    getCoordinatesForCursorEvent(event: AInteractionEvent){\n        return event.ndcCursor??new Vec2();\n    }\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}