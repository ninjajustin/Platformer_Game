{"ast":null,"code":"import _initializerDefineProperty from \"/Users/home/Desktop/cs4620-final-project/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty.js\";\nimport _applyDecoratedDescriptor from \"/Users/home/Desktop/cs4620-final-project/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor.js\";\nimport _initializerWarningHelper from \"/Users/home/Desktop/cs4620-final-project/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper.js\";\nvar _class, _descriptor;\nimport { AController, AObjectState } from \"../base\";\nimport { SceneEvents } from \"./ASceneModel\";\nimport { ASceneView } from \"./ASceneView\";\nimport { ACameraModel, ACameraView } from \"./camera\";\nimport { AModelViewClassMap, AMVClassSpec } from \"../base/amvc/AModelViewClassSpec\";\nimport { ADataTexture } from \"../rendering/image\";\nexport let SceneControllerSubscriptions;\n(function (SceneControllerSubscriptions) {\n  SceneControllerSubscriptions[\"ModelNodeAdded\"] = \"ModelNodeAdded\";\n  SceneControllerSubscriptions[\"ModelNodeRemoved\"] = \"ModelNodeRemoved\";\n})(SceneControllerSubscriptions || (SceneControllerSubscriptions = {}));\nexport let ASceneController = (_class = class ASceneController extends AController {\n  // abstract initCamera():void;\n\n  getCoordinatesForCursorEvent(event) {\n    return this.model.getCoordinatesForCursorEvent(event);\n  }\n  get isReadyToRender() {\n    return this.readyToRender;\n  }\n  get renderWindow() {\n    return this._renderWindow;\n  }\n  get renderer() {\n    return this.renderWindow.renderer;\n  }\n  get sceneController() {\n    return this;\n  }\n  get eventTarget() {\n    return this.renderWindow.contextElement;\n  }\n  constructor(model) {\n    super();\n    _initializerDefineProperty(this, \"readyToRender\", _descriptor, this);\n    this.classMap = void 0;\n    this._renderWindow = void 0;\n    this._model = void 0;\n    this._view = void 0;\n    this._cameraView = void 0;\n    this.readyToRender = false;\n    this.classMap = new AModelViewClassMap();\n    this.onModelNodeAdded = this.onModelNodeAdded.bind(this);\n    this.onModelNodeRemoved = this.onModelNodeRemoved.bind(this);\n    this.addModelViewSpec(ACameraModel, ACameraView);\n    this.initModelViewSpecs();\n    if (model) {\n      this.setModel(model);\n    }\n  }\n  async PreloadAssets() {\n    // await this.model.PreloadAssets();\n  }\n  async initRendering(renderWindow) {\n    this._renderWindow = renderWindow;\n    this._view = new ASceneView(this);\n    this.addView(this.view);\n    this.renderer.autoClear = false;\n    this.renderer.clear();\n    await this.model.confirmInitialized();\n    this._cameraView = ACameraView.Create(this.model.cameraModel);\n    this.addView(this._cameraView);\n    await this.initScene();\n    this.initInteractions();\n    this.addModelSubscriptions();\n    ADataTexture.CheckWebGLSupport(this.renderer);\n    this.readyToRender = true;\n  }\n  createViewForNodeModel(nodeModel) {\n    let spec = this.classMap.getSpecForModel(nodeModel);\n    if (spec) {\n      let view = new spec.viewClass();\n      view.setModel(nodeModel);\n      view.setController(this);\n      return view;\n    } else {\n      throw new Error(`Unsure how to create view for ${nodeModel} with class ${nodeModel.constructor.name}. This often happens for one of the following reasons: 1) You did not add a custom model/view pair to the class spec in the scene controller. 2) You did not decorate a custom model class with @ASerializable(...). In this case check out one of the example models for how to add the decorator.`);\n    }\n  }\n  addModelViewSpec(modelClass, viewClass, details) {\n    this.classMap.addSpec(new AMVClassSpec(modelClass, viewClass, details));\n  }\n  setModel(model) {\n    if (this._model && this._model !== model) {\n      this._unSetModel();\n    }\n    this._model = model;\n    this._view = new ASceneView(this);\n    this.view.addView(this.view);\n  }\n  addModelSubscriptions() {\n    const self = this;\n    this.subscribe(this.model.addEventListener(SceneEvents.NodeAdded, node => {\n      self.onModelNodeAdded(node);\n    }), SceneControllerSubscriptions.ModelNodeAdded);\n    this.subscribe(this.model.addEventListener(SceneEvents.NodeRemoved, node => {\n      self.onModelNodeRemoved(node);\n    }), SceneControllerSubscriptions.ModelNodeRemoved);\n    this.model.mapOverDescendants(descendant => {\n      self.onModelNodeAdded(descendant);\n    });\n  }\n  _unSetModel() {\n    this.clearSubscriptions();\n    this.view.release();\n  }\n  get model() {\n    return this._model;\n  }\n  get view() {\n    return this._view;\n  }\n  get cameraModel() {\n    return this._cameraView.model;\n  }\n  get camera() {\n    return this.cameraModel.camera;\n  }\n\n  // get clock() {\n  //     return this._clock;\n  // }\n\n  get _threeCamera() {\n    return this._cameraView.threejs;\n  }\n  get modelMap() {\n    return this.model.modelMap;\n  }\n  get viewMap() {\n    return this.view.viewMap;\n  }\n  hasModel(model) {\n    if (model.uid === this.model.uid) {\n      return true;\n    }\n    return this.model.hasModel(model);\n  }\n  hasView(view) {\n    return this.view.hasView(view);\n    // return (this.model.hasModelID(view.modelID) && view.uid in this.viewMap[view.modelID]);\n  }\n\n  addView(view) {\n    view.setController(this);\n    this.view.addView(view);\n    if (view.model.parent !== null) {\n      view.model.signalNewParent(view.model.parent);\n    }\n  }\n  removeView(view) {\n    this.view.removeView(view);\n  }\n  getViewListForModel(model) {\n    return this.view.getViewListForModel(model);\n  }\n  onModelNodeAdded(nodeModel) {\n    let newView = this.createViewForNodeModel(nodeModel);\n    this.addView(newView);\n    // this.view.addView(newView);\n    // if(nodeModel.parent!==null){\n    //     nodeModel.signalNewParent(nodeModel.parent as AModel);\n    // }\n  }\n\n  onModelNodeRemoved(nodeModel) {\n    let views = this.view.getViewListForModel(nodeModel);\n    for (let v of views) {\n      v.release();\n    }\n    delete this.viewMap[nodeModel.uid];\n  }\n  onResize(renderWindow) {\n    this.renderer.setSize(renderWindow.container.clientWidth, renderWindow.container.clientHeight);\n    this.camera.onCanvasResize(renderWindow.container.clientWidth, renderWindow.container.clientHeight);\n  }\n  async loadShader(name) {\n    return this.model.loadShader(name);\n  }\n  async loadLineShader(name) {\n    return this.model.loadLineShader(name);\n  }\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"readyToRender\", [AObjectState], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class);","map":{"version":3,"names":["AController","AObjectState","SceneEvents","ASceneView","ACameraModel","ACameraView","AModelViewClassMap","AMVClassSpec","ADataTexture","SceneControllerSubscriptions","ASceneController","getCoordinatesForCursorEvent","event","model","isReadyToRender","readyToRender","renderWindow","_renderWindow","renderer","sceneController","eventTarget","contextElement","constructor","classMap","_model","_view","_cameraView","onModelNodeAdded","bind","onModelNodeRemoved","addModelViewSpec","initModelViewSpecs","setModel","PreloadAssets","initRendering","addView","view","autoClear","clear","confirmInitialized","Create","cameraModel","initScene","initInteractions","addModelSubscriptions","CheckWebGLSupport","createViewForNodeModel","nodeModel","spec","getSpecForModel","viewClass","setController","Error","name","modelClass","details","addSpec","_unSetModel","self","subscribe","addEventListener","NodeAdded","node","ModelNodeAdded","NodeRemoved","ModelNodeRemoved","mapOverDescendants","descendant","clearSubscriptions","release","camera","_threeCamera","threejs","modelMap","viewMap","hasModel","uid","hasView","parent","signalNewParent","removeView","getViewListForModel","newView","views","v","onResize","setSize","container","clientWidth","clientHeight","onCanvasResize","loadShader","loadLineShader"],"sources":["/Users/home/Desktop/cs4620-final-project/src/anigraph/scene/ASceneController.ts"],"sourcesContent":["import * as THREE from \"three\";\nimport {\n    AController, AModel,\n    AModelInterface, AObjectNode, AObjectState,\n    AView,\n    HasModelViewMap,\n    SceneControllerInterface\n} from \"../base\";\nimport {AInteractionEvent} from \"../interaction\";\nimport {ClassInterface} from \"../basictypes\";\nimport {AGLContext, AGLRenderWindow, ARenderDelegate, AShaderModel, ShaderManager} from \"../rendering\";\nimport {ASceneModel, SceneEvents} from \"./ASceneModel\";\nimport {ASceneView} from \"./ASceneView\";\nimport {ACameraModel, ACameraView} from \"./camera\";\nimport {ANodeModel} from \"./nodeModel\";\nimport {_ANodeView, ANodeView} from \"./nodeView\";\nimport {AModelViewClassMap, AMVClassSpec, AMVClassSpecDetails} from \"../base/amvc/AModelViewClassSpec\";\nimport {ADataTexture} from \"../rendering/image\";\n\n\nexport enum SceneControllerSubscriptions {\n    ModelNodeAdded = \"ModelNodeAdded\",\n    ModelNodeRemoved = \"ModelNodeRemoved\"\n}\n\nexport abstract class ASceneController extends AController implements ARenderDelegate, HasModelViewMap, SceneControllerInterface {\n    @AObjectState protected readyToRender:boolean;\n    classMap:AModelViewClassMap;\n    _renderWindow!: AGLRenderWindow;\n    protected _model!: ASceneModel;\n    protected _view!: ASceneView;\n    protected _cameraView!: ACameraView;\n    abstract initScene():Promise<void>;\n\n    abstract initModelViewSpecs():void;\n    abstract onAnimationFrameCallback(context: AGLContext): void\n    // abstract initCamera():void;\n    abstract initInteractions():void;\n\n    getCoordinatesForCursorEvent(event:AInteractionEvent){\n        return this.model.getCoordinatesForCursorEvent(event);\n    }\n\n\n\n\n    get isReadyToRender(): boolean {\n        return this.readyToRender;\n    }\n\n    get renderWindow(): AGLRenderWindow {\n        return this._renderWindow;\n    }\n\n    get renderer(): THREE.WebGLRenderer {\n        return this.renderWindow.renderer;\n    }\n\n    get sceneController(){\n        return this;\n    }\n\n    get eventTarget(): HTMLElement {\n        return this.renderWindow.contextElement;\n    }\n\n    constructor(model: ASceneModel) {\n        super();\n        this.readyToRender=false;\n        this.classMap = new AModelViewClassMap();\n        this.onModelNodeAdded = this.onModelNodeAdded.bind(this);\n        this.onModelNodeRemoved = this.onModelNodeRemoved.bind(this);\n\n        this.addModelViewSpec(ACameraModel, ACameraView);\n        this.initModelViewSpecs();\n\n        if (model) {\n            this.setModel(model)\n        }\n    }\n\n    async PreloadAssets(){\n        // await this.model.PreloadAssets();\n    };\n\n    async initRendering(renderWindow: AGLRenderWindow) {\n        this._renderWindow = renderWindow;\n        this._view = new ASceneView(this);\n        this.addView(this.view);\n        this.renderer.autoClear = false;\n        this.renderer.clear()\n        await this.model.confirmInitialized();\n        this._cameraView = ACameraView.Create(this.model.cameraModel);\n        this.addView(this._cameraView);\n        await this.initScene();\n        this.initInteractions();\n        this.addModelSubscriptions();\n        ADataTexture.CheckWebGLSupport(this.renderer);\n        this.readyToRender = true;\n    }\n\n\n\n\n\n\n    createViewForNodeModel(nodeModel: ANodeModel){\n        let spec = this.classMap.getSpecForModel(nodeModel);\n        if(spec){\n            let view = new (spec.viewClass)();\n            view.setModel(nodeModel);\n            view.setController(this);\n            return view;\n        } else{\n            throw new Error(`Unsure how to create view for ${nodeModel} with class ${nodeModel.constructor.name}. This often happens for one of the following reasons: 1) You did not add a custom model/view pair to the class spec in the scene controller. 2) You did not decorate a custom model class with @ASerializable(...). In this case check out one of the example models for how to add the decorator.`)\n        }\n    }\n\n    addModelViewSpec(modelClass:ClassInterface<ANodeModel>, viewClass:ClassInterface<AView>, details?:AMVClassSpecDetails){\n        this.classMap.addSpec(new AMVClassSpec(modelClass, viewClass, details))\n    }\n\n    setModel(model: ASceneModel) {\n        if (this._model && this._model !== model) {\n            this._unSetModel();\n        }\n        this._model = model;\n        this._view = new ASceneView(this);\n        this.view.addView(this.view);\n    }\n\n    protected addModelSubscriptions() {\n        const self = this;\n        this.subscribe(this.model.addEventListener(SceneEvents.NodeAdded, (node: ANodeModel) => {\n            self.onModelNodeAdded(node);\n        }), SceneControllerSubscriptions.ModelNodeAdded);\n        this.subscribe(this.model.addEventListener(SceneEvents.NodeRemoved, (node: ANodeModel) => {\n            self.onModelNodeRemoved(node);\n        }), SceneControllerSubscriptions.ModelNodeRemoved);\n        this.model.mapOverDescendants((descendant:AObjectNode)=>{\n            self.onModelNodeAdded(descendant as ANodeModel);\n        })\n\n    }\n\n    protected _unSetModel() {\n        this.clearSubscriptions();\n        this.view.release();\n    }\n\n    get model(): ASceneModel {\n        return this._model as ASceneModel;\n    }\n\n    get view(): ASceneView {\n        return this._view as ASceneView;\n    }\n\n    get cameraModel(){\n        return this._cameraView.model;\n    }\n\n    get camera() {\n        return this.cameraModel.camera;\n    }\n\n    // get clock() {\n    //     return this._clock;\n    // }\n\n    protected get _threeCamera() {\n        return this._cameraView.threejs;\n    }\n\n    get modelMap() {\n        return this.model.modelMap\n    };\n\n    get viewMap() {\n        return this.view.viewMap;\n    }\n\n    hasModel(model: AModelInterface) {\n        if(model.uid===this.model.uid){return true;}\n        return this.model.hasModel(model);\n    };\n\n    hasView(view: AView) {\n        return this.view.hasView(view);\n        // return (this.model.hasModelID(view.modelID) && view.uid in this.viewMap[view.modelID]);\n    }\n\n    addView(view: AView) {\n        view.setController(this);\n        this.view.addView(view);\n        if(view.model.parent!==null){\n            view.model.signalNewParent(view.model.parent as AModel);\n        }\n    }\n\n    removeView(view: AView) {\n        this.view.removeView(view);\n    }\n\n    getViewListForModel(model: AModelInterface) :ANodeView[]{\n        return this.view.getViewListForModel(model) as ANodeView[];\n    }\n\n    onModelNodeAdded(nodeModel: ANodeModel) {\n        let newView = this.createViewForNodeModel(nodeModel) as ANodeView;\n        this.addView(newView);\n        // this.view.addView(newView);\n        // if(nodeModel.parent!==null){\n        //     nodeModel.signalNewParent(nodeModel.parent as AModel);\n        // }\n    }\n\n    onModelNodeRemoved(nodeModel: ANodeModel) {\n        let views = this.view.getViewListForModel(nodeModel);\n        for (let v of views) {\n            v.release();\n        }\n        delete this.viewMap[nodeModel.uid];\n    }\n\n    onResize(renderWindow: AGLRenderWindow): void {\n        this.renderer.setSize(renderWindow.container.clientWidth, renderWindow.container.clientHeight);\n        this.camera.onCanvasResize(renderWindow.container.clientWidth, renderWindow.container.clientHeight);\n    }\n\n    async loadShader(name:string){\n        return this.model.loadShader(name);\n    }\n    async loadLineShader(name:string){\n        return this.model.loadLineShader(name);\n    }\n\n}\n"],"mappings":";;;;AACA,SACIA,WAAW,EACmBC,YAAY,QAIvC,SAAS;AAIhB,SAAqBC,WAAW,QAAO,eAAe;AACtD,SAAQC,UAAU,QAAO,cAAc;AACvC,SAAQC,YAAY,EAAEC,WAAW,QAAO,UAAU;AAGlD,SAAQC,kBAAkB,EAAEC,YAAY,QAA4B,kCAAkC;AACtG,SAAQC,YAAY,QAAO,oBAAoB;AAG/C,WAAYC,4BAA4B;AAGvC,WAHWA,4BAA4B;EAA5BA,4BAA4B;EAA5BA,4BAA4B;AAAA,GAA5BA,4BAA4B,KAA5BA,4BAA4B;AAKxC,WAAsBC,gBAAgB,aAA/B,MAAeA,gBAAgB,SAASV,WAAW,CAAuE;EAW7H;;EAGAW,4BAA4B,CAACC,KAAuB,EAAC;IACjD,OAAO,IAAI,CAACC,KAAK,CAACF,4BAA4B,CAACC,KAAK,CAAC;EACzD;EAKA,IAAIE,eAAe,GAAY;IAC3B,OAAO,IAAI,CAACC,aAAa;EAC7B;EAEA,IAAIC,YAAY,GAAoB;IAChC,OAAO,IAAI,CAACC,aAAa;EAC7B;EAEA,IAAIC,QAAQ,GAAwB;IAChC,OAAO,IAAI,CAACF,YAAY,CAACE,QAAQ;EACrC;EAEA,IAAIC,eAAe,GAAE;IACjB,OAAO,IAAI;EACf;EAEA,IAAIC,WAAW,GAAgB;IAC3B,OAAO,IAAI,CAACJ,YAAY,CAACK,cAAc;EAC3C;EAEAC,WAAW,CAACT,KAAkB,EAAE;IAC5B,KAAK,EAAE;IAAC;IAAA,KAxCZU,QAAQ;IAAA,KACRN,aAAa;IAAA,KACHO,MAAM;IAAA,KACNC,KAAK;IAAA,KACLC,WAAW;IAqCjB,IAAI,CAACX,aAAa,GAAC,KAAK;IACxB,IAAI,CAACQ,QAAQ,GAAG,IAAIjB,kBAAkB,EAAE;IACxC,IAAI,CAACqB,gBAAgB,GAAG,IAAI,CAACA,gBAAgB,CAACC,IAAI,CAAC,IAAI,CAAC;IACxD,IAAI,CAACC,kBAAkB,GAAG,IAAI,CAACA,kBAAkB,CAACD,IAAI,CAAC,IAAI,CAAC;IAE5D,IAAI,CAACE,gBAAgB,CAAC1B,YAAY,EAAEC,WAAW,CAAC;IAChD,IAAI,CAAC0B,kBAAkB,EAAE;IAEzB,IAAIlB,KAAK,EAAE;MACP,IAAI,CAACmB,QAAQ,CAACnB,KAAK,CAAC;IACxB;EACJ;EAEA,MAAMoB,aAAa,GAAE;IACjB;EAAA;EAGJ,MAAMC,aAAa,CAAClB,YAA6B,EAAE;IAC/C,IAAI,CAACC,aAAa,GAAGD,YAAY;IACjC,IAAI,CAACS,KAAK,GAAG,IAAItB,UAAU,CAAC,IAAI,CAAC;IACjC,IAAI,CAACgC,OAAO,CAAC,IAAI,CAACC,IAAI,CAAC;IACvB,IAAI,CAAClB,QAAQ,CAACmB,SAAS,GAAG,KAAK;IAC/B,IAAI,CAACnB,QAAQ,CAACoB,KAAK,EAAE;IACrB,MAAM,IAAI,CAACzB,KAAK,CAAC0B,kBAAkB,EAAE;IACrC,IAAI,CAACb,WAAW,GAAGrB,WAAW,CAACmC,MAAM,CAAC,IAAI,CAAC3B,KAAK,CAAC4B,WAAW,CAAC;IAC7D,IAAI,CAACN,OAAO,CAAC,IAAI,CAACT,WAAW,CAAC;IAC9B,MAAM,IAAI,CAACgB,SAAS,EAAE;IACtB,IAAI,CAACC,gBAAgB,EAAE;IACvB,IAAI,CAACC,qBAAqB,EAAE;IAC5BpC,YAAY,CAACqC,iBAAiB,CAAC,IAAI,CAAC3B,QAAQ,CAAC;IAC7C,IAAI,CAACH,aAAa,GAAG,IAAI;EAC7B;EAOA+B,sBAAsB,CAACC,SAAqB,EAAC;IACzC,IAAIC,IAAI,GAAG,IAAI,CAACzB,QAAQ,CAAC0B,eAAe,CAACF,SAAS,CAAC;IACnD,IAAGC,IAAI,EAAC;MACJ,IAAIZ,IAAI,GAAG,IAAKY,IAAI,CAACE,SAAS,EAAG;MACjCd,IAAI,CAACJ,QAAQ,CAACe,SAAS,CAAC;MACxBX,IAAI,CAACe,aAAa,CAAC,IAAI,CAAC;MACxB,OAAOf,IAAI;IACf,CAAC,MAAK;MACF,MAAM,IAAIgB,KAAK,CAAE,iCAAgCL,SAAU,eAAcA,SAAS,CAACzB,WAAW,CAAC+B,IAAK,qSAAoS,CAAC;IAC7Y;EACJ;EAEAvB,gBAAgB,CAACwB,UAAqC,EAAEJ,SAA+B,EAAEK,OAA4B,EAAC;IAClH,IAAI,CAAChC,QAAQ,CAACiC,OAAO,CAAC,IAAIjD,YAAY,CAAC+C,UAAU,EAAEJ,SAAS,EAAEK,OAAO,CAAC,CAAC;EAC3E;EAEAvB,QAAQ,CAACnB,KAAkB,EAAE;IACzB,IAAI,IAAI,CAACW,MAAM,IAAI,IAAI,CAACA,MAAM,KAAKX,KAAK,EAAE;MACtC,IAAI,CAAC4C,WAAW,EAAE;IACtB;IACA,IAAI,CAACjC,MAAM,GAAGX,KAAK;IACnB,IAAI,CAACY,KAAK,GAAG,IAAItB,UAAU,CAAC,IAAI,CAAC;IACjC,IAAI,CAACiC,IAAI,CAACD,OAAO,CAAC,IAAI,CAACC,IAAI,CAAC;EAChC;EAEUQ,qBAAqB,GAAG;IAC9B,MAAMc,IAAI,GAAG,IAAI;IACjB,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC9C,KAAK,CAAC+C,gBAAgB,CAAC1D,WAAW,CAAC2D,SAAS,EAAGC,IAAgB,IAAK;MACpFJ,IAAI,CAAC/B,gBAAgB,CAACmC,IAAI,CAAC;IAC/B,CAAC,CAAC,EAAErD,4BAA4B,CAACsD,cAAc,CAAC;IAChD,IAAI,CAACJ,SAAS,CAAC,IAAI,CAAC9C,KAAK,CAAC+C,gBAAgB,CAAC1D,WAAW,CAAC8D,WAAW,EAAGF,IAAgB,IAAK;MACtFJ,IAAI,CAAC7B,kBAAkB,CAACiC,IAAI,CAAC;IACjC,CAAC,CAAC,EAAErD,4BAA4B,CAACwD,gBAAgB,CAAC;IAClD,IAAI,CAACpD,KAAK,CAACqD,kBAAkB,CAAEC,UAAsB,IAAG;MACpDT,IAAI,CAAC/B,gBAAgB,CAACwC,UAAU,CAAe;IACnD,CAAC,CAAC;EAEN;EAEUV,WAAW,GAAG;IACpB,IAAI,CAACW,kBAAkB,EAAE;IACzB,IAAI,CAAChC,IAAI,CAACiC,OAAO,EAAE;EACvB;EAEA,IAAIxD,KAAK,GAAgB;IACrB,OAAO,IAAI,CAACW,MAAM;EACtB;EAEA,IAAIY,IAAI,GAAe;IACnB,OAAO,IAAI,CAACX,KAAK;EACrB;EAEA,IAAIgB,WAAW,GAAE;IACb,OAAO,IAAI,CAACf,WAAW,CAACb,KAAK;EACjC;EAEA,IAAIyD,MAAM,GAAG;IACT,OAAO,IAAI,CAAC7B,WAAW,CAAC6B,MAAM;EAClC;;EAEA;EACA;EACA;;EAEA,IAAcC,YAAY,GAAG;IACzB,OAAO,IAAI,CAAC7C,WAAW,CAAC8C,OAAO;EACnC;EAEA,IAAIC,QAAQ,GAAG;IACX,OAAO,IAAI,CAAC5D,KAAK,CAAC4D,QAAQ;EAC9B;EAEA,IAAIC,OAAO,GAAG;IACV,OAAO,IAAI,CAACtC,IAAI,CAACsC,OAAO;EAC5B;EAEAC,QAAQ,CAAC9D,KAAsB,EAAE;IAC7B,IAAGA,KAAK,CAAC+D,GAAG,KAAG,IAAI,CAAC/D,KAAK,CAAC+D,GAAG,EAAC;MAAC,OAAO,IAAI;IAAC;IAC3C,OAAO,IAAI,CAAC/D,KAAK,CAAC8D,QAAQ,CAAC9D,KAAK,CAAC;EACrC;EAEAgE,OAAO,CAACzC,IAAW,EAAE;IACjB,OAAO,IAAI,CAACA,IAAI,CAACyC,OAAO,CAACzC,IAAI,CAAC;IAC9B;EACJ;;EAEAD,OAAO,CAACC,IAAW,EAAE;IACjBA,IAAI,CAACe,aAAa,CAAC,IAAI,CAAC;IACxB,IAAI,CAACf,IAAI,CAACD,OAAO,CAACC,IAAI,CAAC;IACvB,IAAGA,IAAI,CAACvB,KAAK,CAACiE,MAAM,KAAG,IAAI,EAAC;MACxB1C,IAAI,CAACvB,KAAK,CAACkE,eAAe,CAAC3C,IAAI,CAACvB,KAAK,CAACiE,MAAM,CAAW;IAC3D;EACJ;EAEAE,UAAU,CAAC5C,IAAW,EAAE;IACpB,IAAI,CAACA,IAAI,CAAC4C,UAAU,CAAC5C,IAAI,CAAC;EAC9B;EAEA6C,mBAAmB,CAACpE,KAAsB,EAAc;IACpD,OAAO,IAAI,CAACuB,IAAI,CAAC6C,mBAAmB,CAACpE,KAAK,CAAC;EAC/C;EAEAc,gBAAgB,CAACoB,SAAqB,EAAE;IACpC,IAAImC,OAAO,GAAG,IAAI,CAACpC,sBAAsB,CAACC,SAAS,CAAc;IACjE,IAAI,CAACZ,OAAO,CAAC+C,OAAO,CAAC;IACrB;IACA;IACA;IACA;EACJ;;EAEArD,kBAAkB,CAACkB,SAAqB,EAAE;IACtC,IAAIoC,KAAK,GAAG,IAAI,CAAC/C,IAAI,CAAC6C,mBAAmB,CAAClC,SAAS,CAAC;IACpD,KAAK,IAAIqC,CAAC,IAAID,KAAK,EAAE;MACjBC,CAAC,CAACf,OAAO,EAAE;IACf;IACA,OAAO,IAAI,CAACK,OAAO,CAAC3B,SAAS,CAAC6B,GAAG,CAAC;EACtC;EAEAS,QAAQ,CAACrE,YAA6B,EAAQ;IAC1C,IAAI,CAACE,QAAQ,CAACoE,OAAO,CAACtE,YAAY,CAACuE,SAAS,CAACC,WAAW,EAAExE,YAAY,CAACuE,SAAS,CAACE,YAAY,CAAC;IAC9F,IAAI,CAACnB,MAAM,CAACoB,cAAc,CAAC1E,YAAY,CAACuE,SAAS,CAACC,WAAW,EAAExE,YAAY,CAACuE,SAAS,CAACE,YAAY,CAAC;EACvG;EAEA,MAAME,UAAU,CAACtC,IAAW,EAAC;IACzB,OAAO,IAAI,CAACxC,KAAK,CAAC8E,UAAU,CAACtC,IAAI,CAAC;EACtC;EACA,MAAMuC,cAAc,CAACvC,IAAW,EAAC;IAC7B,OAAO,IAAI,CAACxC,KAAK,CAAC+E,cAAc,CAACvC,IAAI,CAAC;EAC1C;AAEJ,CAAC,+EAnNIpD,YAAY;EAAA;EAAA;EAAA;EAAA;AAAA"},"metadata":{},"sourceType":"module"}