{"ast":null,"code":"import { ASceneController, Color } from \"../../anigraph\";\nimport { ASceneInteractionMode } from \"../../anigraph/scene/interactionmodes/ASceneInteractionMode\";\nconst INTERACTION_MODE_APP_STATE = \"InteractionMode\";\nexport class BaseSceneController extends ASceneController {\n  get model() {\n    return this._model;\n  }\n  async initScene() {\n    this.view.setBackgroundColor(Color.FromString(\"#000000\"));\n    // this.view.loadSkyBox();\n  }\n\n  onAnimationFrameCallback(context) {\n    this.model.timeUpdate(this.model.clock.time);\n    context.renderer.clear();\n    // this.renderer.clear(false, true);\n\n    // render the scene view\n    context.renderer.render(this.view.threejs, this._threeCamera);\n  }\n  createViewForNodeModel(nodeModel) {\n    return super.createViewForNodeModel(nodeModel);\n  }\n\n  //###############################################//--Defining Interaction Modes--\\\\###############################################\n  //<editor-fold desc=\"Defining Interaction Modes\">\n\n  _setCurrentInteractionMode(name) {\n    super.setCurrentInteractionMode(name);\n  }\n  setCurrentInteractionMode(name) {\n    this._setCurrentInteractionMode(name);\n    this._updateInteractionModeOptions();\n  }\n  initInteractions() {\n    // const self = this;\n    // this.subscribeToAppState(INTERACTION_MODE_APP_STATE, (v:string)=>{\n    //     /**\n    //      * Call _setCurrentInteractionMode here, which just calls the parent version of the function.\n    //      * This is to avoid an infinite loop caused by calling _updateInteractionModeOptions\n    //      */\n    //     self._setCurrentInteractionMode(v);\n    // }, INTERACTION_MODE_APP_STATE)\n  }\n  defineInteractionMode(name, mode) {\n    super.defineInteractionMode(name, mode);\n    this._updateInteractionModeOptions();\n  }\n  _updateInteractionModeOptions() {\n    // let appState = GetAppState();\n    // appState.setSelectionControl(\n    //     INTERACTION_MODE_APP_STATE,\n    //     this._currentInteractionModeName,\n    //     this._interactions.getGUISelectableModesList()\n    // )\n    // appState.updateControlPanel();\n  }\n  createNewInteractionMode(name, interactionCallbacks) {\n    if (this._interactions.modes[name]) {\n      throw new Error(`Tried to create interaction mode \"${name}\", but mode with this name is already defined!`);\n    }\n    let newInteractionMode = new ASceneInteractionMode(name, this, interactionCallbacks);\n    this.defineInteractionMode(name, newInteractionMode);\n  }\n}","map":{"version":3,"names":["ASceneController","Color","ASceneInteractionMode","INTERACTION_MODE_APP_STATE","BaseSceneController","model","_model","initScene","view","setBackgroundColor","FromString","onAnimationFrameCallback","context","timeUpdate","clock","time","renderer","clear","render","threejs","_threeCamera","createViewForNodeModel","nodeModel","_setCurrentInteractionMode","name","setCurrentInteractionMode","_updateInteractionModeOptions","initInteractions","defineInteractionMode","mode","createNewInteractionMode","interactionCallbacks","_interactions","modes","Error","newInteractionMode"],"sources":["/Users/home/Desktop/cs4620-final-project/src/app/BaseClasses/BaseSceneController.ts"],"sourcesContent":["import {\n    AGLContext,\n    AInteractionMode,\n    ANodeModel,\n    ASceneController,\n    Color,\n    HasInteractionModeCallbacks,\n} from \"../../anigraph\";\nimport {BaseSceneModel} from \"./BaseSceneModel\";\nimport {ASceneInteractionMode} from \"../../anigraph/scene/interactionmodes/ASceneInteractionMode\";\n\nconst INTERACTION_MODE_APP_STATE = \"InteractionMode\";\n\nexport abstract class BaseSceneController extends ASceneController {\n    get model(): BaseSceneModel {\n        return this._model as BaseSceneModel;\n    }\n    async initScene(): Promise<void> {\n        this.view.setBackgroundColor(Color.FromString(\"#000000\"));\n        // this.view.loadSkyBox();\n    }\n    abstract initModelViewSpecs():void;\n\n    onAnimationFrameCallback(context: AGLContext) {\n        this.model.timeUpdate(this.model.clock.time);\n\n        context.renderer.clear();\n        // this.renderer.clear(false, true);\n\n        // render the scene view\n        context.renderer.render(this.view.threejs, this._threeCamera);\n    }\n\n    createViewForNodeModel(nodeModel: ANodeModel) {\n        return super.createViewForNodeModel(nodeModel)\n    }\n\n    //###############################################//--Defining Interaction Modes--\\\\###############################################\n    //<editor-fold desc=\"Defining Interaction Modes\">\n\n\n\n    _setCurrentInteractionMode(name?:string){\n        super.setCurrentInteractionMode(name);\n    }\n\n    setCurrentInteractionMode(name?: string) {\n        this._setCurrentInteractionMode(name);\n        this._updateInteractionModeOptions();\n    }\n\n\n    initInteractions(){\n        // const self = this;\n        // this.subscribeToAppState(INTERACTION_MODE_APP_STATE, (v:string)=>{\n        //     /**\n        //      * Call _setCurrentInteractionMode here, which just calls the parent version of the function.\n        //      * This is to avoid an infinite loop caused by calling _updateInteractionModeOptions\n        //      */\n        //     self._setCurrentInteractionMode(v);\n        // }, INTERACTION_MODE_APP_STATE)\n    }\n\n    defineInteractionMode(name: string, mode?: AInteractionMode) {\n        super.defineInteractionMode(name, mode);\n        this._updateInteractionModeOptions();\n    }\n\n    _updateInteractionModeOptions(){\n        // let appState = GetAppState();\n        // appState.setSelectionControl(\n        //     INTERACTION_MODE_APP_STATE,\n        //     this._currentInteractionModeName,\n        //     this._interactions.getGUISelectableModesList()\n        // )\n        // appState.updateControlPanel();\n    }\n\n    createNewInteractionMode(\n        name:string,\n        interactionCallbacks?:HasInteractionModeCallbacks\n    ){\n        if(this._interactions.modes[name]){\n            throw new Error(`Tried to create interaction mode \"${name}\", but mode with this name is already defined!`)\n        }\n        let newInteractionMode = new ASceneInteractionMode(name, this, interactionCallbacks);\n        this.defineInteractionMode(name, newInteractionMode);\n    }\n\n}\n"],"mappings":"AAAA,SAIIA,gBAAgB,EAChBC,KAAK,QAEF,gBAAgB;AAEvB,SAAQC,qBAAqB,QAAO,6DAA6D;AAEjG,MAAMC,0BAA0B,GAAG,iBAAiB;AAEpD,OAAO,MAAeC,mBAAmB,SAASJ,gBAAgB,CAAC;EAC/D,IAAIK,KAAK,GAAmB;IACxB,OAAO,IAAI,CAACC,MAAM;EACtB;EACA,MAAMC,SAAS,GAAkB;IAC7B,IAAI,CAACC,IAAI,CAACC,kBAAkB,CAACR,KAAK,CAACS,UAAU,CAAC,SAAS,CAAC,CAAC;IACzD;EACJ;;EAGAC,wBAAwB,CAACC,OAAmB,EAAE;IAC1C,IAAI,CAACP,KAAK,CAACQ,UAAU,CAAC,IAAI,CAACR,KAAK,CAACS,KAAK,CAACC,IAAI,CAAC;IAE5CH,OAAO,CAACI,QAAQ,CAACC,KAAK,EAAE;IACxB;;IAEA;IACAL,OAAO,CAACI,QAAQ,CAACE,MAAM,CAAC,IAAI,CAACV,IAAI,CAACW,OAAO,EAAE,IAAI,CAACC,YAAY,CAAC;EACjE;EAEAC,sBAAsB,CAACC,SAAqB,EAAE;IAC1C,OAAO,KAAK,CAACD,sBAAsB,CAACC,SAAS,CAAC;EAClD;;EAEA;EACA;;EAIAC,0BAA0B,CAACC,IAAY,EAAC;IACpC,KAAK,CAACC,yBAAyB,CAACD,IAAI,CAAC;EACzC;EAEAC,yBAAyB,CAACD,IAAa,EAAE;IACrC,IAAI,CAACD,0BAA0B,CAACC,IAAI,CAAC;IACrC,IAAI,CAACE,6BAA6B,EAAE;EACxC;EAGAC,gBAAgB,GAAE;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAAA;EAGJC,qBAAqB,CAACJ,IAAY,EAAEK,IAAuB,EAAE;IACzD,KAAK,CAACD,qBAAqB,CAACJ,IAAI,EAAEK,IAAI,CAAC;IACvC,IAAI,CAACH,6BAA6B,EAAE;EACxC;EAEAA,6BAA6B,GAAE;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA;EAAA;EAGJI,wBAAwB,CACpBN,IAAW,EACXO,oBAAiD,EACpD;IACG,IAAG,IAAI,CAACC,aAAa,CAACC,KAAK,CAACT,IAAI,CAAC,EAAC;MAC9B,MAAM,IAAIU,KAAK,CAAE,qCAAoCV,IAAK,gDAA+C,CAAC;IAC9G;IACA,IAAIW,kBAAkB,GAAG,IAAIjC,qBAAqB,CAACsB,IAAI,EAAE,IAAI,EAAEO,oBAAoB,CAAC;IACpF,IAAI,CAACH,qBAAqB,CAACJ,IAAI,EAAEW,kBAAkB,CAAC;EACxD;AAEJ"},"metadata":{},"sourceType":"module"}